var Attacklab=Attacklab||{};Attacklab.showdown=Attacklab.showdown||{};
Attacklab.showdown.converter=function(){var d,h,j,s=0;this.makeHtml=function(a){d=[];h=[];j=[];a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=A("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=t(a);a=i(a);a=m(a);a=B(a);a=a.replace(/~D/g,"$$");return a=a.replace(/~T/g,"~")};var i=function(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,k,f,b,c){k=k.toLowerCase();d[k]=
v(f);if(b)return b+c;c&&(h[k]=c.replace(/"/g,"&quot;"));return""})},t=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,g);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,g);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,g);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,
g);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,g);return a=a.replace(/\n\n/g,"\n")},g=function(a,f){var b;b=f.replace(/\n\n/g,"\n");b=b.replace(/^\n/,"");b=b.replace(/\n+$/g,"");return b="\n\n~K"+(j.push(b)-1)+"K\n\n"},m=function(k){for(var k=l(k),f=r("<hr />"),k=k.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,f),k=k.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,f),k=k.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,f),k=o(k),k=n(k),k=p(k),k=t(k),k=k.replace(/^\n+/g,""),k=k.replace(/\n+$/g,
""),b=k.split(/\n{2,}/g),k=[],f=b.length,c=0;c<f;c++){var e=b[c];0<=e.search(/~K(\d+)K/g)?k.push(e):0<=e.search(/\S/)&&(e=a(e),e=e.replace(/^([ \t]*)/g,"<p>"),e+="</p>",k.push(e))}f=k.length;for(c=0;c<f;c++)for(;0<=k[c].search(/~K(\d+)K/);)b=j[RegExp.$1],b=b.replace(/\$/g,"$$$$"),k[c]=k[c].replace(/~K\d+K/,b);return k=k.join("\n\n")},a=function(a){a=q(a);a=b(a);a=a.replace(/\\(\\)/g,w);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,w);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,c);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
c);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,e);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,e);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,e);a=x(a);a=v(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},b=function(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,
function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=u(a,"\\`*_")})},e=function(a,f,b,c,e,l,p,g){void 0==g&&(g="");a=c.toLowerCase();if(""==e)if(""==a&&(a=b.toLowerCase().replace(/ ?\n/g," ")),void 0!=d[a])e=d[a],void 0!=h[a]&&(g=h[a]);else if(-1<f.search(/\(\s*\)$/m))e="";else return f;e=u(e,"*_");f='<a href="'+e+'"';""!=g&&(g=g.replace(/"/g,"&quot;"),g=u(g,"*_"),f+=' title="'+g+'"');return f+(">"+b+"</a>")},c=function(a,f,b,c,e,l,g,p){a=b;c=c.toLowerCase();p||(p="");if(""==e)if(""==c&&(c=
a.toLowerCase().replace(/ ?\n/g," ")),void 0!=d[c])e=d[c],void 0!=h[c]&&(p=h[c]);else return f;a=a.replace(/"/g,"&quot;");e=u(e,"*_");f='<img src="'+e+'" alt="'+a+'"';p=p.replace(/"/g,"&quot;");p=u(p,"*_");return f+(' title="'+p+'"')+" />"},l=function(f){f=f.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(f,b){return r("<h1>"+a(b)+"</h1>")});f=f.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(f,b){return r("<h2>"+a(b)+"</h2>")});return f=f.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(f,b,c){f=
b.length;return r("<h"+f+">"+a(c)+"</h"+f+">")})},y,o=function(a){var a=a+"~0",f=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;s?a=a.replace(f,function(a,f,b){a=f;b=-1<b.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=y(a);a=a.replace(/\s+$/,"");return"<"+b+">"+a+"</"+b+">\n"}):(f=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(f,function(a,f,b,c){a=b;c=-1<c.search(/[*+-]/g)?
"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=y(a);return f+"<"+c+">\n"+a+"</"+c+">\n"}));return a=a.replace(/~0/,"")};y=function(f){s++;f=f.replace(/\n{2,}$/,"\n");f=(f+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(f,b,c,e,d){f=d;b||-1<f.search(/\n{2,}/)?f=m(z(f)):(f=o(z(f)),f=f.replace(/\n$/,""),f=a(f));return"<li>"+f+"</li>\n"});f=f.replace(/~0/g,"");s--;return f};var n=function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(a,b,c){a=f(z(b));a=A(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return r("<pre><code>"+a+"\n</code></pre>")+c});return a=a.replace(/~0/,"")},r=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(j.push(a)-1)+"K\n\n"},q=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,e){a=e.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=f(a);return b+"<code>"+a+"</code>"})},f=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,
"&gt;");return a=u(a,"*_{}[]\\",!1)},p=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,f){var b;b=f.replace(/^[ \t]*>[ \t]?/gm,"~0");b=b.replace(/~0/g,"");b=b.replace(/^[ \t]+$/gm,"");b=m(b);b=b.replace(/(^|\n)/g,"$1  ");b=b.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,f){var b;b=f.replace(/^  /mg,"~0");return b=b.replace(/~0/g,"")});return r("<blockquote>\n"+b+"\n</blockquote>")})},v=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=
a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},x=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,f){return C(B(f))})},C=function(a){var f=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&15))+";"},function(a){return a}],a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=f[Math.floor(2*
Math.random())](a);else if(":"!=a)var b=Math.random(),a=0.9<b?f[2](a):0.45<b?f[1](a):f[0](a);return a});return a=('<a href="'+a+'">'+a+"</a>").replace(/">.+:/g,'">')},B=function(a){return a=a.replace(/~E(\d+)E/g,function(a,f){var b=parseInt(f);return String.fromCharCode(b)})},z=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},A=function(a){a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,f){for(var b=f,c=4-b.length%4,e=0;e<
c;e++)b+=" ";return b});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},u=function(a,f,b){f="(["+f.replace(/([\[\]\\])/g,"\\$1")+"])";b&&(f="\\\\"+f);return a=a.replace(RegExp(f,"g"),w)},w=function(a,f){return"~E"+f.charCodeAt(0)+"E"}};var Showdown=Attacklab.showdown;Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js");Attacklab=Attacklab||{};
Attacklab.wmdBase=function(){var d=top.Attacklab,h=top.document,j=top.RegExp,s=top.navigator;d.Util={};d.Position={};d.Command={};d.Global={};var i=d.Util,t=d.Position,g=d.Command,m=d.Global;m.isIE=/msie/.test(s.userAgent.toLowerCase());m.isIE_5or6=/msie 6/.test(s.userAgent.toLowerCase())||/msie 5/.test(s.userAgent.toLowerCase());m.isIE_7plus=m.isIE&&!m.isIE_5or6;m.isOpera=/opera/.test(s.userAgent.toLowerCase());m.isKonqueror=/konqueror/.test(s.userAgent.toLowerCase());d.PanelCollection=function(){this.buttonBar=
h.getElementById("wmd-button-bar");this.preview=h.getElementById("wmd-preview");this.output=h.getElementById("wmd-output");this.input=h.getElementById("wmd-input")};d.panels=void 0;d.ieCachedRange=null;d.ieRetardedClick=!1;i.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");if(a.currentStyle)return"none"!==a.currentStyle.display};i.addEvent=function(a,b,e){a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener(b,e,!1)};i.removeEvent=
function(a,b,e){a.detachEvent?a.detachEvent("on"+b,e):a.removeEventListener(b,e,!1)};i.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};i.extendRegExp=function(a,b,e){if(null===b||void 0===b)b="";if(null===e||void 0===e)e="";var a=a.toString(),c="",c=a.match(/\/([gim]*)$/),c=null===c?c[0]:"",a=a.replace(/(^\/|\/[gim]*$)/g,"");return RegExp(b+a+e,c)};i.createImage=function(a){var a="images/"+a,b=h.createElement("img");b.className="wmd-button";b.src=a;return b};i.prompt=
function(a,b,e){var c,d,g;void 0===b&&(b="");var o=function(a){27===(a.charCode||a.keyCode)&&n(!0)},n=function(a){i.removeEvent(h.body,"keydown",o);var f=g.value;a?f=null:(f=f.replace("http://http://","http://"),f=f.replace("http://https://","https://"),f=f.replace("http://ftp://","ftp://"),-1===f.indexOf("http://")&&(-1===f.indexOf("ftp://")&&-1===f.indexOf("https://"))&&(f="http://"+f));c.parentNode.removeChild(c);d.parentNode.removeChild(d);e(f);return!1},r=function(){c=h.createElement("div");
c.className="wmd-prompt-dialog";c.style.padding="10px;";c.style.position="fixed";c.style.width="400px";c.style.zIndex="1001";var e=h.createElement("div");e.innerHTML=a;e.style.padding="5px";c.appendChild(e);e=h.createElement("form");e.onsubmit=function(){return n(!1)};style=e.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";c.appendChild(e);g=h.createElement("input");g.type="text";g.value=b;style=g.style;style.display=
"block";style.width="80%";style.marginLeft=style.marginRight="auto";e.appendChild(g);var f=h.createElement("input");f.type="button";f.onclick=function(){return n(!1)};f.value="OK";style=f.style;style.margin="10px";style.display="inline";style.width="7em";var d=h.createElement("input");d.type="button";d.onclick=function(){return n(!0)};d.value="Cancel";style=d.style;style.margin="10px";style.display="inline";style.width="7em";/mac/.test(s.platform.toLowerCase())?(e.appendChild(d),e.appendChild(f)):
(e.appendChild(f),e.appendChild(d));i.addEvent(h.body,"keydown",o);c.style.top="50%";c.style.left="50%";c.style.display="block";m.isIE_5or6&&(c.style.position="absolute",c.style.top=h.documentElement.scrollTop+200+"px",c.style.left="50%");h.body.appendChild(c);c.style.marginTop=-(t.getHeight(c)/2)+"px";c.style.marginLeft=-(t.getWidth(c)/2)+"px"};(function(){d=h.createElement("div");d.className="wmd-prompt-background";style=d.style;style.position="absolute";style.top="0";style.zIndex="1000";m.isKonqueror?
style.backgroundColor="transparent":m.isIE?style.filter="alpha(opacity=50)":style.opacity="0.5";var a=t.getPageSize();style.height=a[1]+"px";m.isIE?(style.left=h.documentElement.scrollLeft,style.width=h.documentElement.clientWidth):(style.left="0",style.width="100%");h.body.appendChild(d)})();top.setTimeout(function(){r();var a=b.length;if(void 0!==g.selectionStart)g.selectionStart=0,g.selectionEnd=a;else if(g.createTextRange){var f=g.createTextRange();f.collapse(!1);f.moveStart("character",-a);f.moveEnd("character",
a);f.select()}g.focus()},0)};t.getTop=function(a,b){var e=a.offsetTop;if(!b)for(;a=a.offsetParent;)e+=a.offsetTop;return e};t.getHeight=function(a){return a.offsetHeight||a.scrollHeight};t.getWidth=function(a){return a.offsetWidth||a.scrollWidth};t.getPageSize=function(){var a,b,e,c;self.innerHeight&&self.scrollMaxY?(a=h.body.scrollWidth,b=self.innerHeight+self.scrollMaxY):h.body.scrollHeight>h.body.offsetHeight?(a=h.body.scrollWidth,b=h.body.scrollHeight):(a=h.body.offsetWidth,b=h.body.offsetHeight);
self.innerHeight?(e=self.innerWidth,c=self.innerHeight):h.documentElement&&h.documentElement.clientHeight?(e=h.documentElement.clientWidth,c=h.documentElement.clientHeight):h.body&&(e=h.body.clientWidth,c=h.body.clientHeight);a=Math.max(a,e);b=Math.max(b,c);return[a,b,e,c]};d.inputPoller=function(a,b){var e=this,c=d.panels.input,l,g,h,n;this.tick=function(){if(i.isVisible(c)){if(c.selectionStart||0===c.selectionStart){var a=c.selectionStart,b=c.selectionEnd;if(a!=l||b!=g)if(l=a,g=b,h!=c.value)return h=
c.value,!0}return!1}};this.destroy=function(){top.clearInterval(n)};n=top.setInterval(function(){i.isVisible(c)&&e.tick()&&a()},b)};d.undoManager=function(a){var b=this,e=[],c=0,l="none",g,h,n,j,q=function(a,b){l!=a&&(l=a,b||p());!m.isIE||"moving"!=l?n=top.setTimeout(f,1):j=null},f=function(){j=new d.TextareaState;h.tick();n=void 0};this.setCommandMode=function(){l="command";p();n=top.setTimeout(f,0)};this.canUndo=function(){return 1<c};this.canRedo=function(){return e[c+1]?!0:!1};this.undo=function(){b.canUndo()&&
(g?(g.restore(),g=null):(e[c]=new d.TextareaState,e[--c].restore(),a&&a()));l="none";d.panels.input.focus();f()};this.redo=function(){b.canRedo()&&(e[++c].restore(),a&&a());l="none";d.panels.input.focus();f()};var p=function(){var f=j||new d.TextareaState;if(!f)return!1;"moving"==l?g||(g=f):(g&&(e[c-1].text!=g.text&&(e[c++]=g),g=null),e[c++]=f,e[c+1]=null,a&&a())},v=function(a){var f=!1;if(a.ctrlKey||a.metaKey)switch(String.fromCharCode(a.charCode||a.keyCode)){case "y":b.redo();f=!0;break;case "z":a.shiftKey?
b.redo():b.undo(),f=!0}f&&(a.preventDefault&&a.preventDefault(),top.event&&(top.event.returnValue=!1))},x=function(a){!a.ctrlKey&&!a.metaKey&&(a=a.keyCode,33<=a&&40>=a||63232<=a&&63235>=a?q("moving"):8==a||46==a||127==a?q("deleting"):13==a?q("newlines"):27==a?q("escape"):(16>a||20<a)&&91!=a&&q("typing"))};this.destroy=function(){h&&h.destroy()};(function(){i.addEvent(d.panels.input,"keypress",function(a){(a.ctrlKey||a.metaKey)&&(89==a.keyCode||90==a.keyCode)&&a.preventDefault()});var a=function(){if((m.isIE||
j&&j.text!=d.panels.input.value)&&void 0==n)l="paste",p(),f()};h=new d.inputPoller(a,100);i.addEvent(d.panels.input,"keydown",v);i.addEvent(d.panels.input,"keydown",x);i.addEvent(d.panels.input,"mousedown",function(){q("moving")});d.panels.input.onpaste=a;d.panels.input.ondrop=a})();f();p()};d.editor=function(a){a||(a=function(){});var b=d.panels.input,e=this,c,l=function(f){b.focus();if(f.textOp){c&&c.setCommandMode();var g=new d.TextareaState;if(!g)return;var l=g.getChunks(),h=function(){b.focus();
l&&g.setChunks(l);g.restore();a()};f.textOp(l,h,!0)||h()}f.execute&&f.execute(e)},j=function(){c&&(o(document.getElementById("wmd-undo-button"),c.canUndo()),o(document.getElementById("wmd-redo-button"),c.canRedo()))},o=function(a,b){if(b){if(a.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){this.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){this.style.backgroundPosition=this.XShift+" 0px"},m.isIE&&(a.onmousedown=function(){d.ieRetardedClick=!0;d.ieCachedRange=
document.selection.createRange()}),!a.isHelp)a.onclick=function(){if(this.onmouseout)this.onmouseout();l(this);return false}}else a.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){}},n=function(){var a=document.getElementById("wmd-button-bar"),b=document.createElement("ul");b.id="wmd-button-row";b=a.appendChild(b);a=document.createElement("li");a.className="wmd-button";a.id="wmd-bold-button";a.title="Strong <strong> Ctrl+B";a.XShift="0px";a.textOp=g.doBold;
o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-italic-button";a.title="Emphasis <em> Ctrl+I";a.XShift="-20px";a.textOp=g.doItalic;o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-link-button";a.title="Hyperlink <a> Ctrl+L";a.XShift="-40px";a.textOp=function(a,b){return g.doLinkOrImage(a,b,!1)};o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-quote-button";a.title="Blockquote <blockquote> Ctrl+Q";
a.XShift="-60px";a.textOp=g.doBlockquote;o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-image-button";a.title="Image <img> Ctrl+G";a.XShift="-100px";a.textOp=function(a,b){return g.doLinkOrImage(a,b,!0)};o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-olist-button";a.title="Numbered List <ol> Ctrl+O";a.XShift="-120px";a.textOp=function(a,b,c){g.doList(a,b,!0,c)};o(a,!0);b.appendChild(a);a=document.createElement("li");
a.className="wmd-button";a.id="wmd-ulist-button";a.title="Bulleted List <ul> Ctrl+U";a.XShift="-140px";a.textOp=function(a,b,c){g.doList(a,b,!1,c)};o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-heading-button";a.title="Heading <h1>/<h2> Ctrl+H";a.XShift="-160px";a.textOp=g.doHeading;o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-hr-button";a.title="Horizontal Rule <hr> Ctrl+R";a.XShift="-180px";a.textOp=g.doHorizontalRule;
o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-undo-button";a.title="Undo - Ctrl+Z";a.XShift="-200px";a.execute=function(a){a.undo()};o(a,!0);b.appendChild(a);a=document.createElement("li");a.className="wmd-button";a.id="wmd-redo-button";a.title="Redo - Ctrl+Y";a.title=/win/.test(s.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";a.XShift="-220px";a.execute=function(a){a.redo()};o(a,!0);b.appendChild(a);j()},r=function(){if(d.showdown)var a=
new d.showdown.converter;var c=b.value,e=function(){b.value=c};!/markdown/.test(d.wmd_env.output.toLowerCase())&&a&&(b.value=q(a.makeHtml(c)),top.setTimeout(e,0));return!0},q=function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};this.undo=function(){c&&c.undo()};this.redo=function(){c&&c.redo()};this.destroy=function(){c&&c.destroy();(void 0).parentNode&&(void 0).parentNode.removeChild(void 0);b&&(b.style.marginTop="");top.clearInterval(void 0)};
(function(){/\?noundo/.test(h.location.href)&&(d.nativeUndo=!0);d.nativeUndo||(c=new d.undoManager(function(){a();j()}));n();var e="keydown";m.isOpera&&(e="keypress");i.addEvent(b,e,function(a){if(a.ctrlKey||a.metaKey){switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "b":l(document.getElementById("wmd-bold-button"));break;case "i":l(document.getElementById("wmd-italic-button"));break;case "l":l(document.getElementById("wmd-link-button"));break;case "q":l(document.getElementById("wmd-quote-button"));
break;case "k":l(document.getElementById("wmd-code-button"));break;case "g":l(document.getElementById("wmd-image-button"));break;case "o":l(document.getElementById("wmd-olist-button"));break;case "u":l(document.getElementById("wmd-ulist-button"));break;case "h":l(document.getElementById("wmd-heading-button"));break;case "r":l(document.getElementById("wmd-hr-button"));break;case "y":l(document.getElementById("wmd-redo-button"));break;case "z":a.shiftKey?l(document.getElementById("wmd-redo-button")):
l(document.getElementById("wmd-undo-button"));break;default:return}a.preventDefault&&a.preventDefault();if(top.event)top.event.returnValue=false}});i.addEvent(b,"keyup",function(a){if(!a.shiftKey&&(!a.ctrlKey&&!a.metaKey)&&(a.charCode||a.keyCode)===13){fakeButton={};fakeButton.textOp=g.doAutoindent;l(fakeButton)}});m.isIE&&i.addEvent(b,"keydown",function(a){if(a.keyCode===27)return false});if(b.form){var p=b.form.onsubmit;b.form.onsubmit=function(){r();if(p)return p.apply(this,arguments)}}})()};d.TextareaState=
function(){var a=this,b=d.panels.input;this.init=function(){if(i.isVisible(b)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=b.scrollTop,!this.text&&b.selectionStart||0===b.selectionStart))this.text=b.value};this.setInputAreaSelection=function(){if(i.isVisible(b))if(void 0!==b.selectionStart&&!m.isOpera)b.focus(),b.selectionStart=a.start,b.selectionEnd=a.end,b.scrollTop=a.scrollTop;else if(h.selection&&!(h.activeElement&&h.activeElement!==b)){b.focus();var e=b.createTextRange();e.moveStart("character",
-b.value.length);e.moveEnd("character",-b.value.length);e.moveEnd("character",a.end);e.moveStart("character",a.start);e.select()}};this.setInputAreaSelectionStartEnd=function(){if(b.selectionStart||0===b.selectionStart)a.start=b.selectionStart,a.end=b.selectionEnd;else if(h.selection){a.text=i.fixEolChars(b.value);var e;d.ieRetardedClick&&d.ieCachedRange?(e=d.ieCachedRange,d.ieRetardedClick=!1):e=h.selection.createRange();var c=i.fixEolChars(e.text),g=""+c+"";e.text=g;var j=i.fixEolChars(b.value);
e.moveStart("character",-g.length);e.text=c;a.start=j.indexOf("");a.end=j.lastIndexOf("")-1;if(g=a.text.length-i.fixEolChars(b.value).length){for(e.moveStart("character",-c.length);g--;)c+="\n",a.end+=1;e.text=c}this.setInputAreaSelection()}};this.restore=function(){void 0!=a.text&&a.text!=b.value&&(b.value=a.text);this.setInputAreaSelection();b.scrollTop=a.scrollTop};this.getChunks=function(){var b=new d.Chunks;b.before=i.fixEolChars(a.text.substring(0,a.start));b.startTag="";b.selection=i.fixEolChars(a.text.substring(a.start,
a.end));b.endTag="";b.after=i.fixEolChars(a.text.substring(a.end));b.scrollTop=a.scrollTop;return b};this.setChunks=function(a){a.before+=a.startTag;a.after=a.endTag+a.after;m.isOpera&&(a.before=a.before.replace(/\n/g,"\r\n"),a.selection=a.selection.replace(/\n/g,"\r\n"),a.after=a.after.replace(/\n/g,"\r\n"));this.start=a.before.length;this.end=a.before.length+a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()};d.Chunks=function(){};d.Chunks.prototype.findTags=
function(a,b){var e=this,c;a&&(c=i.extendRegExp(a,"","$"),this.before=this.before.replace(c,function(a){e.startTag+=a;return""}),c=i.extendRegExp(a,"^",""),this.selection=this.selection.replace(c,function(a){e.startTag+=a;return""}));b&&(c=i.extendRegExp(b,"","$"),this.selection=this.selection.replace(c,function(a){e.endTag=a+e.endTag;return""}),c=i.extendRegExp(b,"^",""),this.after=this.after.replace(c,function(a){e.endTag=a+e.endTag;return""}))};d.Chunks.prototype.trimWhitespace=function(a){this.selection=
this.selection.replace(/^(\s*)/,"");a||(this.before+=j.$1);this.selection=this.selection.replace(/(\s*)$/,"");a||(this.after=j.$1+this.after)};d.Chunks.prototype.addBlankLines=function(a,b,e){void 0===a&&(a=1);void 0===b&&(b=1);a++;b++;var c,d;this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=j.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag+=j.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=j.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=
j.$1;if(this.before){for(c=d="";a--;)c+="\\n?",d+="\n";e&&(c="\\n*");this.before=this.before.replace(new j(c+"$",""),d)}if(this.after){for(c=d="";b--;)c+="\\n?",d+="\n";e&&(c="\\n*");this.after=this.after.replace(new j(c,""),d)}};g.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";g.unwrap=function(a){var b=new j("([^\\n])\\n(?!(\\n|"+g.prefixes+"))","g");a.selection=a.selection.replace(b,"$1 $2")};g.wrap=function(a,b){g.unwrap(a);var e=new j("(.{1,"+b+"})( +|$\\n?)",
"gm");a.selection=a.selection.replace(e,function(a,b){return(new j("^"+g.prefixes,"")).test(a)?a:b+"\n"});a.selection=a.selection.replace(/\s+$/,"")};g.doBold=function(a){return g.doBorI(a,2,"strong text")};g.doItalic=function(a){return g.doBorI(a,1,"emphasized text")};g.doBorI=function(a,b,e){a.trimWhitespace();a.selection=a.selection.replace(/\n{2,}/g,"\n");a.before.search(/(\**$)/);var c=j.$1;a.after.search(/(^\**)/);var d=j.$1,c=Math.min(c.length,d.length);c>=b&&(2!=c||1!=b)?(a.before=a.before.replace(j("[*]{"+
b+"}$",""),""),a.after=a.after.replace(j("^[*]{"+b+"}",""),"")):!a.selection&&d?(a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,""),a.before=a.before+d+j.$1):(!a.selection&&!d&&(a.selection=e),b=1>=b?"*":"**",a.before+=b,a.after=b+a.after)};g.stripLinkDefs=function(a,b){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,c,d,g,h){b[c]=a.replace(/\s*$/,"");return g?(b[c]=a.replace(/["(](.+?)[")]$/,
""),g+h):""})};g.addLinkDef=function(a,b){var e=0,c={};a.before=g.stripLinkDefs(a.before,c);a.selection=g.stripLinkDefs(a.selection,c);a.after=g.stripLinkDefs(a.after,c);var d="",h=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,i=function(a){e++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+e+"]:");d+="\n"+a},j=function(a,b,d,g){return c[d]?(i(c[d]),b+e+g):a};a.before=a.before.replace(h,j);b?i(b):a.selection=a.selection.replace(h,j);var m=e;a.after=a.after.replace(h,j);a.after&&(a.after=a.after.replace(/\n*$/,
""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+d;return m};g.doLinkOrImage=function(a,b,d){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(1<a.endTag.length)a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",g.addLinkDef(a,null);else if(/\n\n/.test(a.selection))g.addLinkDef(a,null);else{var c=function(c){null!==c&&(a.startTag=a.endTag="",c=g.addLinkDef(a," [999]: "+c),a.startTag=d?"![":"[",a.endTag="]["+c+"]",a.selection||(a.selection=d?"alt text":
"link text"));b()};d?i.prompt("<p style='margin-top: 0px'><b>输入图片路径</b></p><p>你也可以加上图片title。如：<br />http://wmd-editor.com/images/cloud1.jpg   \"Optional title\"</p>","http://",c):i.prompt("<p style='margin-top: 0px'><b>输入网页地址</b></p><p>你也可以加上地址title。如:<br />http://wmd-editor.com/   \"Optional title\"</p>","http://",c);return!0}};i.makeAPI=function(){d.wmd={};d.wmd.editor=d.editor;d.wmd.previewManager=d.previewManager};i.startEditor=function(){if(!1===d.wmd_env.autostart)i.makeAPI();else{var a;i.addEvent(top,
"load",function(){d.panels=new d.PanelCollection;a=new d.previewManager;new d.editor(a.refresh);a.refresh(!0)})}};d.previewManager=function(){var a=this,b,e,c,g,j,o,n="delayed",r=function(){var a=0;top.innerHeight?a=top.pageYOffset:h.documentElement&&h.documentElement.scrollTop?a=h.documentElement.scrollTop:h.body&&(a=h.body.scrollTop);return a},q=function(){if(d.panels.preview||d.panels.output){var a=d.panels.input.value;if(!(a&&a==j)){j=a;var c=(new Date).getTime();!b&&d.showdown&&(b=new d.showdown.converter);
b&&(a=b.makeHtml(a));g=(new Date).getTime()-c;s(a);o=a}}},f=function(){c&&(top.clearTimeout(c),c=void 0);if("manual"!==n){var a=0;"delayed"===n&&(a=g);3E3<a&&(a=3E3);c=top.setTimeout(q,a)}};this.refresh=function(a){a?(j="",q()):f()};this.processingTime=function(){return g};this.output=function(){return o};this.setUpdateMode=function(b){n=b;a.refresh()};var p=!0,s=function(a){var b=t.getTop(d.panels.input)-r();if(d.panels.output)if(void 0!==d.panels.output.value)d.panels.output.value=a,d.panels.output.readOnly=
!0;else{var c=a.replace(/&/g,"&amp;"),c=c.replace(/</g,"&lt;");d.panels.output.innerHTML="<pre><code>"+c+"</code></pre>"}d.panels.preview&&(d.panels.preview.innerHTML=a);d.panels.preview&&(d.panels.preview.scrollTop=(d.panels.preview.scrollHeight-d.panels.preview.clientHeight)*(d.panels.preview.scrollHeight<=d.panels.preview.clientHeight?1:d.panels.preview.scrollTop/(d.panels.preview.scrollHeight-d.panels.preview.clientHeight)));d.panels.output&&(d.panels.output.scrollTop=(d.panels.output.scrollHeight-
d.panels.output.clientHeight)*(d.panels.output.scrollHeight<=d.panels.output.clientHeight?1:d.panels.output.scrollTop/(d.panels.output.scrollHeight-d.panels.output.clientHeight)));if(p)p=!1;else{var e=t.getTop(d.panels.input)-r();m.isIE?top.setTimeout(function(){top.scrollBy(0,e-b)},0):top.scrollBy(0,e-b)}};this.destroy=function(){e&&e.destroy()};(function(a,b){i.addEvent(a,"input",b);a.onpaste=b;a.ondrop=b;i.addEvent(a,"keypress",b);i.addEvent(a,"keydown",b);e=new d.inputPoller(b,500)})(d.panels.input,
f);q();d.panels.preview&&(d.panels.preview.scrollTop=0);d.panels.output&&(d.panels.output.scrollTop=0)};g.doAutoindent=function(a,b,d){a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");d=!1;/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(a.before)&&g.doList&&g.doList(a,b,!1,!0);/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(a.before)&&g.doList&&g.doList(a,b,!0,!0);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&
g.doBlockquote&&g.doBlockquote(a,b,d);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&g.doCode&&g.doCode(a,b,d)};g.doBlockquote=function(a,b,e){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,d,e,g){a.before+=d;a.after=g+a.after;return e});a.before=a.before.replace(/(>[ \t]*)$/,function(b,d){a.selection=d+a.selection;return""});b=e?"Blockquote":"";a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||b;a.before&&(a.before=a.before.replace(/\n?$/,"\n"));a.after&&(a.after=
a.after.replace(/^\n?/,"\n"));a.before=a.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,function(b){a.startTag=b;return""});a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){a.endTag=b;return""});b=function(b){var d=b?"> ":"";if(a.startTag)a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,d)+"\n"});if(a.endTag)a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,
d)+"\n"})};if(/^(?![ ]{0,3}>)/m.test(a.selection))g.wrap(a,d.wmd_env.lineLength-2),a.selection=a.selection.replace(/^/gm,"> "),b(!0),a.addBlankLines();else if(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),g.unwrap(a),b(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag)a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n");/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,
d){a.startTag=a.startTag+d;return""}))};g.doCode=function(a,b,d){b=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&!b||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){a.selection=b+a.selection;return""});var c=b=1;if(/\n(\t|[ ]{4,}).*\n$/.test(a.before)||""===a.after)b=0;/^\n(\t|[ ]{4,})/.test(a.after)&&(c=0);a.addBlankLines(b,c);a.selection?a.selection=/^[ ]{0,3}\S/m.test(a.selection)?a.selection.replace(/^/gm,"    "):a.selection.replace(/^[ ]{4}/gm,""):(a.startTag=
"    ",a.selection=d?"enter code here":"")}else a.trimWhitespace(),a.findTags(/`/,/`/),!a.startTag&&!a.endTag?(a.startTag=a.endTag="`",a.selection||(a.selection=d?"enter code here":"")):a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag=""};g.doList=function(a,b,e,c){var b=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,h="-",i=1,m=function(){var a;e?(a=" "+i+". ",i++):a=" "+h+" ";return a},n=function(a){void 0===e&&(e=/^\s*\d/.test(a));
return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return m()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);a.before&&(!/\n$/.test(a.before)&&!/^\n/.test(a.startTag))&&(a.before+=a.startTag,a.startTag="");if(a.startTag){var r=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");g.unwrap(a);a.addBlankLines();r&&(a.after=a.after.replace(b,n));if(e==r)return}var q=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,
function(a){if(/^\s*([*+-])/.test(a))h=j.$1;q=/[^\n]\n\n[^\n]/.test(a)?1:0;return n(a)});a.selection||(a.selection=c?"List item":" ");var c=m(),f=1;a.after=a.after.replace(b,function(a){f=/[^\n]\n\n[^\n]/.test(a)?1:0;return n(a)});a.trimWhitespace(!0);a.addBlankLines(q,f,!0);a.startTag=c;c=c.replace(/./g," ");g.wrap(a,d.wmd_env.lineLength-c.length);a.selection=a.selection.replace(/\n/g,"\n"+c)};g.doHeading=function(a){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,
"");if(a.selection){var b=0;a.findTags(/#+[ ]*/,/[ ]*#+/);/#+/.test(a.startTag)&&(b=j.lastMatch.length);a.startTag=a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(b=1);/-+/.test(a.endTag)&&(b=2);a.startTag=a.endTag="";a.addBlankLines(1,1);b=0==b?2:b-1;if(0<b){var b=2<=b?"-":"=",e=a.selection.length;e>d.wmd_env.lineLength&&(e=d.wmd_env.lineLength);for(a.endTag="\n";e--;)a.endTag+=b}}else a.startTag="## ",a.selection="Heading",a.endTag=" ##"};g.doHorizontalRule=function(a){a.startTag=
"----------\n";a.selection="";a.addBlankLines(2,1,!0)}};Attacklab.wmd_env={};Attacklab.account_options={};Attacklab.wmd_defaults={version:1,output:"HTML",lineLength:40,delayLoad:!1};
Attacklab.wmd||(Attacklab.wmd=function(){Attacklab.loadEnv=function(){var d=function(d){if(d)for(var j in d)Attacklab.wmd_env[j]=d[j]};d(Attacklab.wmd_defaults);d(Attacklab.account_options);d(top.wmd_options);Attacklab.full=!0;Attacklab.wmd_env.buttons=Attacklab.wmd_env.buttons||"bold italic link blockquote code image ol ul heading hr"};Attacklab.loadEnv()},Attacklab.wmd(),Attacklab.wmdBase(),Attacklab.Util.startEditor());
