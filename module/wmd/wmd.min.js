var Attacklab=Attacklab||{},Showdown;Attacklab.showdown=Attacklab.showdown||{},Attacklab.showdown.converter=function(){var n,t,e,o=0;this.makeHtml=function(i){return n=[],t=[],e=[],i=i.replace(/~/g,"~T"),i=i.replace(/\$/g,"~D"),i=i.replace(/\r\n/g,"\n"),i=i.replace(/\r/g,"\n"),i="\n\n"+i+"\n\n",i=d(i),i=i.replace(/^[ \t]+$/mg,""),i=v(i),i=g(i),i=s(i),i=k(i),i=i.replace(/~D/g,"$$"),i.replace(/~T/g,"~")};var g=function(i){var i=i.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(i,r,u,f,e){return(r=r.toLowerCase(),n[r]=b(u),f)?f+e:(e&&(t[r]=e.replace(/"/g,"&quot;")),"")});return i},v=function(n){n=n.replace(/\n/g,"\n\n");return n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,u),n=n.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,u),n=n.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,u),n=n.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,u),n=n.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,u),n.replace(/\n\n/g,"\n")},u=function(n,t){var i=t;return i=i.replace(/\n\n/g,"\n"),i=i.replace(/^\n/,""),i=i.replace(/\n+$/g,""),"\n\n~K"+(e.push(i)-1)+"K\n\n"},s=function(n){n=rt(n);var t=i("<hr />");return n=n.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),n=n.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,t),n=n.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,t),n=p(n),n=ut(n),n=ot(n),n=v(n),st(n)},f=function(n){return n=ft(n),n=nt(n),n=ht(n),n=it(n),n=tt(n),n=ct(n),n=b(n),n=et(n),n.replace(/  +\n/g," <br />\n")},nt=function(n){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return n.replace(t,function(n){var t=n.replace(/(.)<\/?code>(?=.)/g,"$1`");return r(t,"\\`*_")})},tt=function(n){return n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,h),n=n.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,h),n.replace(/(\[([^\[\]]+)\])()()()()()/g,h)},h=function(i,u,f,e,o,s,h,c){var y;c==undefined&&(c="");var p=u,w=f,l=e.toLowerCase(),a=o,v=c;if(a=="")if(l==""&&(l=w.toLowerCase().replace(/ ?\n/g," ")),a="#"+l,n[l]!=undefined)a=n[l],t[l]!=undefined&&(v=t[l]);else if(p.search(/\(\s*\)$/m)>-1)a="";else return p;return a=r(a,"*_"),y='<a href="'+a+'"',v!=""&&(v=v.replace(/"/g,"&quot;"),v=r(v,"*_"),y+=' title="'+v+'"'),y+(">"+w+"<\/a>")},it=function(n){return n=n.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y),n.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y)},y=function(i,u,f,e,o,s,h,c){var w=u,y=f,a=e.toLowerCase(),v=o,l=c,p;if(l||(l=""),v=="")if(a==""&&(a=y.toLowerCase().replace(/ ?\n/g," ")),v="#"+a,n[a]!=undefined)v=n[a],t[a]!=undefined&&(l=t[a]);else return w;return y=y.replace(/"/g,"&quot;"),v=r(v,"*_"),p='<img src="'+v+'" alt="'+y+'"',l=l.replace(/"/g,"&quot;"),l=r(l,"*_"),p+=' title="'+l+'"',p+" />"},rt=function(n){return n=n.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(n,t){return i("<h1>"+f(t)+"<\/h1>")}),n=n.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(n,t){return i("<h2>"+f(t)+"<\/h2>")}),n.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(n,t,r){var u=t.length;return i("<h"+u+">"+f(r)+"<\/h"+u+">")})},c,p=function(n){n+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return o?n=n.replace(t,function(n,t,i){var u=t,f=i.search(/[*+-]/g)>-1?"ul":"ol",r;return u=u.replace(/\n{2,}/g,"\n\n\n"),r=c(u),r=r.replace(/\s+$/,""),"<"+f+">"+r+"<\/"+f+">\n"}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,n=n.replace(t,function(n,t,i,r){var e=t,u=i,f=r.search(/[*+-]/g)>-1?"ul":"ol",u=u.replace(/\n{2,}/g,"\n\n\n"),o=c(u);return e+"<"+f+">\n"+o+"<\/"+f+">\n"})),n.replace(/~0/,"")};c=function(n){return o++,n=n.replace(/\n{2,}$/,"\n"),n+="~0",n=n.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(n,t,i,r,u){var e=u,o=t,h=i;return o||e.search(/\n{2,}/)>-1?e=s(l(e)):(e=p(l(e)),e=e.replace(/\n$/,""),e=f(e)),"<li>"+e+"<\/li>\n"}),n=n.replace(/~0/g,""),o--,n};var ut=function(n){return n+="~0",n=n.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(n,t,r){var u=t,f=r;return u=w(l(u)),u=d(u),u=u.replace(/^\n+/g,""),u=u.replace(/\n+$/g,""),u="<pre><code>"+u+"\n<\/code><\/pre>",i(u)+f}),n.replace(/~0/,"")},i=function(n){return n=n.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(e.push(n)-1)+"K\n\n"},ft=function(n){return n.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(n,t,i,r){var u=r;return u=u.replace(/^([ \t]*)/g,""),u=u.replace(/[ \t]*$/g,""),u=w(u),t+"<code>"+u+"<\/code>"})},w=function(n){return n=n.replace(/&/g,"&amp;"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;"),r(n,"*_{}[]\\",!1)},et=function(n){return n=n.replace(/(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\1/g,"<strong>$2<\/strong>"),n.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2<\/em>")},ot=function(n){return n.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(n,t){var r=t;return r=r.replace(/^[ \t]*>[ \t]?/gm,"~0"),r=r.replace(/~0/g,""),r=r.replace(/^[ \t]+$/gm,""),r=s(r),r=r.replace(/(^|\n)/g,"$1  "),r=r.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(n,t){var i=t;return i=i.replace(/^  /mg,"~0"),i.replace(/~0/g,"")}),i("<blockquote>\n"+r+"\n<\/blockquote>")})},st=function(n){var i,t,u;n=n.replace(/^\n+/g,""),n=n.replace(/\n+$/g,"");var s=n.split(/\n{2,}/g),r=[],o=s.length;for(t=0;t<o;t++)i=s[t],i.search(/~K(\d+)K/g)>=0?r.push(i):i.search(/\S/)>=0&&(i=f(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="<\/p>",r.push(i));for(o=r.length,t=0;t<o;t++)while(r[t].search(/~K(\d+)K/)>=0)u=e[RegExp.$1],u=u.replace(/\$/g,"$$$$"),r[t]=r[t].replace(/~K\d+K/,u);return r.join("\n\n")},b=function(n){return n=n.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),n.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},ht=function(n){return n=n.replace(/\\(\\)/g,a),n.replace(/\\([`*_{}\[\]()>#+-.!])/g,a)},ct=function(n){return n=n.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1<\/a>'),n.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(n,t){return lt(k(t))})},lt=function(n){function i(n){var t="0123456789ABCDEF",i=n.charCodeAt(0);return t.charAt(i>>4)+t.charAt(i&15)}var t=[function(n){return"&#"+n.charCodeAt(0)+";"},function(n){return"&#x"+i(n)+";"},function(n){return n}];return n="mailto:"+n,n=n.replace(/./g,function(n){if(n=="@")n=t[Math.floor(Math.random()*2)](n);else if(n!=":"){var i=Math.random();n=i>.9?t[2](n):i>.45?t[1](n):t[0](n)}return n}),n='<a href="'+n+'">'+n+"<\/a>",n.replace(/">.+:/g,'">')},k=function(n){return n.replace(/~E(\d+)E/g,function(n,t){var i=parseInt(t);return String.fromCharCode(i)})},l=function(n){return n=n.replace(/^(\t|[ ]{1,4})/gm,"~0"),n.replace(/~0/g,"")},d=function(n){return n=n.replace(/\t(?=\t)/g,"    "),n=n.replace(/\t/g,"~A~B"),n=n.replace(/~B(.+?)~A/g,function(n,t){for(var i=t,u=4-i.length%4,r=0;r<u;r++)i+=" ";return i}),n=n.replace(/~A/g,"    "),n.replace(/~B/g,"")},r=function(n,t,i){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])",u;return i&&(r="\\\\"+r),u=new RegExp(r,"g"),n.replace(u,a)},a=function(n,t){var i=t.charCodeAt(0);return"~E"+i+"E"}},Showdown=Attacklab.showdown,Attacklab.fileLoaded&&Attacklab.fileLoaded("showdown.js"),Attacklab=Attacklab||{},Attacklab.wmdBase=function(){var n=top.Attacklab,i=top.document,f=top.RegExp,o=top.navigator;n.Util={},n.Position={},n.Command={},n.Global={};var r=n.Util,e=n.Position,t=n.Command,u=n.Global;u.isIE=/msie/.test(o.userAgent.toLowerCase()),u.isIE_5or6=/msie 6/.test(o.userAgent.toLowerCase())||/msie 5/.test(o.userAgent.toLowerCase()),u.isIE_7plus=u.isIE&&!u.isIE_5or6,u.isOpera=/opera/.test(o.userAgent.toLowerCase()),u.isKonqueror=/konqueror/.test(o.userAgent.toLowerCase());var s="<p style='margin-top: 0px'><b>输入图片路径<\/b><\/p><p>你也可以加上图片title。如：<br />http://wmd-editor.com/images/cloud1.jpg   \"Optional title\"<\/p>",h="<p style='margin-top: 0px'><b>输入网页地址<\/b><\/p><p>你也可以加上地址title。如:<br />http://wmd-editor.com/   \"Optional title\"<\/p>",c="http://",l="http://",a="images/",v=500,y=100;n.PanelCollection=function(){this.buttonBar=i.getElementById("wmd-button-bar"),this.preview=i.getElementById("wmd-preview"),this.output=i.getElementById("wmd-output"),this.input=i.getElementById("wmd-input")},n.panels=undefined,n.ieCachedRange=null,n.ieRetardedClick=!1,r.isVisible=function(n){return window.getComputedStyle?window.getComputedStyle(n,null).getPropertyValue("display")!=="none":n.currentStyle?n.currentStyle.display!=="none":void 0},r.addEvent=function(n,t,i){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener(t,i,!1)},r.removeEvent=function(n,t,i){n.detachEvent?n.detachEvent("on"+t,i):n.removeEventListener(t,i,!1)},r.fixEolChars=function(n){return n=n.replace(/\r\n/g,"\n"),n.replace(/\r/g,"\n")},r.extendRegExp=function(n,t,i){(t===null||t===undefined)&&(t=""),(i===null||i===undefined)&&(i="");var r=n.toString(),u="",f=r.match(/\/([gim]*)$/);return u=f===null?f[0]:"",r=r.replace(/(^\/|\/[gim]*$)/g,""),r=t+r+i,new RegExp(r,u)},r.createImage=function(n){var r=a+n,t=i.createElement("img");return t.className="wmd-button",t.src=r,t},r.prompt=function(n,t,f){var s,c,h;t===undefined&&(t="");var a=function(n){var t=n.charCode||n.keyCode;t===27&&l(!0)},l=function(n){r.removeEvent(i.body,"keydown",a);var t=h.value;return n?t=null:(t=t.replace("http://http://","http://"),t=t.replace("http://https://","https://"),t=t.replace("http://ftp://","ftp://"),t.indexOf("http://")===-1&&t.indexOf("ftp://")===-1&&t.indexOf("https://")===-1&&(t="http://"+t)),s.parentNode.removeChild(s),c.parentNode.removeChild(c),f(t),!1},v=function(){c=i.createElement("div"),c.className="wmd-prompt-background",style=c.style,style.position="absolute",style.top="0",style.zIndex="1000",u.isKonqueror?style.backgroundColor="transparent":u.isIE?style.filter="alpha(opacity=50)":style.opacity="0.5";var n=e.getPageSize();style.height=n[1]+"px",u.isIE?(style.left=i.documentElement.scrollLeft,style.width=i.documentElement.clientWidth):(style.left="0",style.width="100%"),i.body.appendChild(c)},y=function(){var y,f,c,v;s=i.createElement("div"),s.className="wmd-prompt-dialog",s.style.padding="10px;",s.style.position="fixed",s.style.width="400px",s.style.zIndex="1001",y=i.createElement("div"),y.innerHTML=n,y.style.padding="5px",s.appendChild(y),f=i.createElement("form"),f.onsubmit=function(){return l(!1)},style=f.style,style.padding="0",style.margin="0",style.cssFloat="left",style.width="100%",style.textAlign="center",style.position="relative",s.appendChild(f),h=i.createElement("input"),h.type="text",h.value=t,style=h.style,style.display="block",style.width="80%",style.marginLeft=style.marginRight="auto",f.appendChild(h),c=i.createElement("input"),c.type="button",c.onclick=function(){return l(!1)},c.value="OK",style=c.style,style.margin="10px",style.display="inline",style.width="7em",v=i.createElement("input"),v.type="button",v.onclick=function(){return l(!0)},v.value="Cancel",style=v.style,style.margin="10px",style.display="inline",style.width="7em",/mac/.test(o.platform.toLowerCase())?(f.appendChild(v),f.appendChild(c)):(f.appendChild(c),f.appendChild(v)),r.addEvent(i.body,"keydown",a),s.style.top="50%",s.style.left="50%",s.style.display="block",u.isIE_5or6&&(s.style.position="absolute",s.style.top=i.documentElement.scrollTop+200+"px",s.style.left="50%"),i.body.appendChild(s),s.style.marginTop=-(e.getHeight(s)/2)+"px",s.style.marginLeft=-(e.getWidth(s)/2)+"px"};v(),top.setTimeout(function(){var i,n;y(),i=t.length,h.selectionStart!==undefined?(h.selectionStart=0,h.selectionEnd=i):h.createTextRange&&(n=h.createTextRange(),n.collapse(!1),n.moveStart("character",-i),n.moveEnd("character",i),n.select()),h.focus()},0)},e.getTop=function(n,t){var i=n.offsetTop;if(!t)while(n=n.offsetParent)i+=n.offsetTop;return i},e.getHeight=function(n){return n.offsetHeight||n.scrollHeight},e.getWidth=function(n){return n.offsetWidth||n.scrollWidth},e.getPageSize=function(){var r,u,n,t,f,e;return self.innerHeight&&self.scrollMaxY?(r=i.body.scrollWidth,u=self.innerHeight+self.scrollMaxY):i.body.scrollHeight>i.body.offsetHeight?(r=i.body.scrollWidth,u=i.body.scrollHeight):(r=i.body.offsetWidth,u=i.body.offsetHeight),self.innerHeight?(n=self.innerWidth,t=self.innerHeight):i.documentElement&&i.documentElement.clientHeight?(n=i.documentElement.clientWidth,t=i.documentElement.clientHeight):i.body&&(n=i.body.clientWidth,t=i.body.clientHeight),f=Math.max(r,n),e=Math.max(u,t),[f,e,n,t]},n.inputPoller=function(t,i){var l=this,u=n.panels.input,f,e,o,s,h,c;this.tick=function(){if(r.isVisible(u)){if(u.selectionStart||u.selectionStart===0){var n=u.selectionStart,t=u.selectionEnd;if((n!=f||t!=e)&&(f=n,e=t,o!=u.value))return o=u.value,!0}return!1}},h=function(){r.isVisible(u)&&l.tick()&&t()},c=function(){s=top.setInterval(h,i)},this.destroy=function(){top.clearInterval(s)},c()},n.undoManager=function(t){var c=this,e=[],i=0,o="none",f,a,v,l,s=function(n,t){o!=n&&(o=n,t||p()),u.isIE&&o=="moving"?l=null:v=top.setTimeout(h,1)},h=function(){l=new n.TextareaState,a.tick(),v=undefined};this.setCommandMode=function(){o="command",p(),v=top.setTimeout(h,0)},this.canUndo=function(){return i>1},this.canRedo=function(){return e[i+1]?!0:!1},this.undo=function(){c.canUndo()&&(f?(f.restore(),f=null):(e[i]=new n.TextareaState,e[--i].restore(),t&&t())),o="none",n.panels.input.focus(),h()},this.redo=function(){c.canRedo()&&(e[++i].restore(),t&&t()),o="none",n.panels.input.focus(),h()};var p=function(){var r=l||new n.TextareaState;if(!r)return!1;if(o=="moving"){f||(f=r);return}f&&(e[i-1].text!=f.text&&(e[i++]=f),f=null),e[i++]=r,e[i+1]=null,t&&t()},w=function(n){var t=!1,i,r;if(n.ctrlKey||n.metaKey){i=n.charCode||n.keyCode,r=String.fromCharCode(i);switch(r){case"y":c.redo(),t=!0;break;case"z":n.shiftKey?c.redo():c.undo(),t=!0}}if(t){n.preventDefault&&n.preventDefault(),top.event&&(top.event.returnValue=!1);return}},b=function(n){if(!n.ctrlKey&&!n.metaKey){var t=n.keyCode;t>=33&&t<=40||t>=63232&&t<=63235?s("moving"):t==8||t==46||t==127?s("deleting"):t==13?s("newlines"):t==27?s("escape"):(t<16||t>20)&&t!=91&&s("typing")}},k=function(){r.addEvent(n.panels.input,"keypress",function(n){(n.ctrlKey||n.metaKey)&&(n.keyCode==89||n.keyCode==90)&&n.preventDefault()});var t=function(){(u.isIE||l&&l.text!=n.panels.input.value)&&v==undefined&&(o="paste",p(),h())};a=new n.inputPoller(t,y),r.addEvent(n.panels.input,"keydown",w),r.addEvent(n.panels.input,"keydown",b),r.addEvent(n.panels.input,"mousedown",function(){s("moving")}),n.panels.input.onpaste=t,n.panels.input.ondrop=t},d=function(){k(),h(),p()};this.destroy=function(){a&&a.destroy()},d()},n.editor=function(f){var v;f||(f=function(){});var h=n.panels.input,y=this,l,p,c,e=function(t){var i;if(h.focus(),t.textOp){if(c&&c.setCommandMode(),i=new n.TextareaState,!i)return;var r=i.getChunks(),u=function(){h.focus(),r&&i.setChunks(r),i.restore(),f()},e=t.textOp(r,u,!0);e||u()}t.execute&&t.execute(y)},a=function(){c&&(s(document.getElementById("wmd-undo-button"),c.canUndo()),s(document.getElementById("wmd-redo-button"),c.canRedo()))},s=function(t,i){var r="0px",f="-40px";i?(t.style.backgroundPosition=t.XShift+" "+r,t.onmouseover=function(){this.style.backgroundPosition=this.XShift+" "+f},t.onmouseout=function(){this.style.backgroundPosition=this.XShift+" "+r},u.isIE&&(t.onmousedown=function(){n.ieRetardedClick=!0,n.ieCachedRange=document.selection.createRange()}),t.isHelp||(t.onclick=function(){return this.onmouseout&&this.onmouseout(),e(this),!1})):(t.style.backgroundPosition=t.XShift+" -20px",t.onmouseover=t.onmouseout=t.onclick=function(){})},w=function(){var b=document.getElementById("wmd-button-bar"),n=document.createElement("ul"),r,u,f,e,h,c,l,v,y,p,w,i;n.id="wmd-button-row",n=b.appendChild(n),r=document.createElement("li"),r.className="wmd-button",r.id="wmd-bold-button",r.title="Strong <strong> Ctrl+B",r.XShift="0px",r.textOp=t.doBold,s(r,!0),n.appendChild(r),u=document.createElement("li"),u.className="wmd-button",u.id="wmd-italic-button",u.title="Emphasis <em> Ctrl+I",u.XShift="-20px",u.textOp=t.doItalic,s(u,!0),n.appendChild(u),f=document.createElement("li"),f.className="wmd-button",f.id="wmd-link-button",f.title="Hyperlink <a> Ctrl+L",f.XShift="-40px",f.textOp=function(n,i){return t.doLinkOrImage(n,i,!1)},s(f,!0),n.appendChild(f),e=document.createElement("li"),e.className="wmd-button",e.id="wmd-quote-button",e.title="Blockquote <blockquote> Ctrl+Q",e.XShift="-60px",e.textOp=t.doBlockquote,s(e,!0),n.appendChild(e),h=document.createElement("li"),h.className="wmd-button",h.id="wmd-code-button",h.title="Code Sample <pre><code> Ctrl+K",h.XShift="-80px",h.textOp=t.doCode,s(h,!0),n.appendChild(h),c=document.createElement("li"),c.className="wmd-button",c.id="wmd-image-button",c.title="Image <img> Ctrl+G",c.XShift="-100px",c.textOp=function(n,i){return t.doLinkOrImage(n,i,!0)},s(c,!0),n.appendChild(c),l=document.createElement("li"),l.className="wmd-button",l.id="wmd-olist-button",l.title="Numbered List <ol> Ctrl+O",l.XShift="-120px",l.textOp=function(n,i,r){t.doList(n,i,!0,r)},s(l,!0),n.appendChild(l),v=document.createElement("li"),v.className="wmd-button",v.id="wmd-ulist-button",v.title="Bulleted List <ul> Ctrl+U",v.XShift="-140px",v.textOp=function(n,i,r){t.doList(n,i,!1,r)},s(v,!0),n.appendChild(v),y=document.createElement("li"),y.className="wmd-button",y.id="wmd-heading-button",y.title="Heading <h1>/<h2> Ctrl+H",y.XShift="-160px",y.textOp=t.doHeading,s(y,!0),n.appendChild(y),p=document.createElement("li"),p.className="wmd-button",p.id="wmd-hr-button",p.title="Horizontal Rule <hr> Ctrl+R",p.XShift="-180px",p.textOp=t.doHorizontalRule,s(p,!0),n.appendChild(p),w=document.createElement("li"),w.className="wmd-button",w.id="wmd-undo-button",w.title="Undo - Ctrl+Z",w.XShift="-200px",w.execute=function(n){n.undo()},s(w,!0),n.appendChild(w),i=document.createElement("li"),i.className="wmd-button",i.id="wmd-redo-button",i.title="Redo - Ctrl+Y",i.title=/win/.test(o.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z",i.XShift="-220px",i.execute=function(n){n.redo()},s(i,!0),n.appendChild(i),a()},b=function(){var o,s;/\?noundo/.test(i.location.href)&&(n.nativeUndo=!0),n.nativeUndo||(c=new n.undoManager(function(){f(),a()})),w(),o="keydown",u.isOpera&&(o="keypress"),r.addEvent(h,o,function(n){if(n.ctrlKey||n.metaKey){var t=n.charCode||n.keyCode,i=String.fromCharCode(t).toLowerCase();switch(i){case"b":e(document.getElementById("wmd-bold-button"));break;case"i":e(document.getElementById("wmd-italic-button"));break;case"l":e(document.getElementById("wmd-link-button"));break;case"q":e(document.getElementById("wmd-quote-button"));break;case"k":e(document.getElementById("wmd-code-button"));break;case"g":e(document.getElementById("wmd-image-button"));break;case"o":e(document.getElementById("wmd-olist-button"));break;case"u":e(document.getElementById("wmd-ulist-button"));break;case"h":e(document.getElementById("wmd-heading-button"));break;case"r":e(document.getElementById("wmd-hr-button"));break;case"y":e(document.getElementById("wmd-redo-button"));break;case"z":n.shiftKey?e(document.getElementById("wmd-redo-button")):e(document.getElementById("wmd-undo-button"));break;default:return}n.preventDefault&&n.preventDefault(),top.event&&(top.event.returnValue=!1)}}),r.addEvent(h,"keyup",function(n){if(!n.shiftKey&&!n.ctrlKey&&!n.metaKey){var i=n.charCode||n.keyCode;i===13&&(fakeButton={},fakeButton.textOp=t.doAutoindent,e(fakeButton))}}),u.isIE&&r.addEvent(h,"keydown",function(n){var t=n.keyCode;if(t===27)return!1}),h.form&&(s=h.form.onsubmit,h.form.onsubmit=function(){return k(),s?s.apply(this,arguments):void 0})},k=function(){var t,i,r;return n.showdown&&(t=new n.showdown.converter),i=h.value,r=function(){h.value=i},/markdown/.test(n.wmd_env.output.toLowerCase())||t&&(h.value=d(t.makeHtml(i)),top.setTimeout(r,0)),!0},d=function(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};this.undo=function(){c&&c.undo()},this.redo=function(){c&&c.redo()},v=function(){b()},this.destroy=function(){c&&c.destroy(),l.parentNode&&l.parentNode.removeChild(l),h&&(h.style.marginTop=""),top.clearInterval(p)},v()},n.TextareaState=function(){var f=this,t=n.panels.input;this.init=function(){r.isVisible(t)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=t.scrollTop,(!this.text&&t.selectionStart||t.selectionStart===0)&&(this.text=t.value))},this.setInputAreaSelection=function(){if(r.isVisible(t))if(t.selectionStart===undefined||u.isOpera){if(i.selection){if(i.activeElement&&i.activeElement!==t)return;t.focus();var n=t.createTextRange();n.moveStart("character",-t.value.length),n.moveEnd("character",-t.value.length),n.moveEnd("character",f.end),n.moveStart("character",f.start),n.select()}}else t.focus(),t.selectionStart=f.start,t.selectionEnd=f.end,t.scrollTop=f.scrollTop},this.setInputAreaSelectionStartEnd=function(){var u,s,h;if(t.selectionStart||t.selectionStart===0)f.start=t.selectionStart,f.end=t.selectionEnd;else if(i.selection){f.text=r.fixEolChars(t.value),n.ieRetardedClick&&n.ieCachedRange?(u=n.ieCachedRange,n.ieRetardedClick=!1):u=i.selection.createRange();var e=r.fixEolChars(u.text),o="\x07",c=o+e+o;if(u.text=c,s=r.fixEolChars(t.value),u.moveStart("character",-c.length),u.text=e,f.start=s.indexOf(o),f.end=s.lastIndexOf(o)-o.length,h=f.text.length-r.fixEolChars(t.value).length,h){for(u.moveStart("character",-e.length);h--;)e+="\n",f.end+=1;u.text=e}this.setInputAreaSelection()}},this.restore=function(){f.text!=undefined&&f.text!=t.value&&(t.value=f.text),this.setInputAreaSelection(),t.scrollTop=f.scrollTop},this.getChunks=function(){var t=new n.Chunks;return t.before=r.fixEolChars(f.text.substring(0,f.start)),t.startTag="",t.selection=r.fixEolChars(f.text.substring(f.start,f.end)),t.endTag="",t.after=r.fixEolChars(f.text.substring(f.end)),t.scrollTop=f.scrollTop,t},this.setChunks=function(n){n.before=n.before+n.startTag,n.after=n.endTag+n.after,u.isOpera&&(n.before=n.before.replace(/\n/g,"\r\n"),n.selection=n.selection.replace(/\n/g,"\r\n"),n.after=n.after.replace(/\n/g,"\r\n")),this.start=n.before.length,this.end=n.before.length+n.selection.length,this.text=n.before+n.selection+n.after,this.scrollTop=n.scrollTop},this.init()},n.Chunks=function(){},n.Chunks.prototype.findTags=function(n,t){var i=this,u;n&&(u=r.extendRegExp(n,"","$"),this.before=this.before.replace(u,function(n){return i.startTag=i.startTag+n,""}),u=r.extendRegExp(n,"^",""),this.selection=this.selection.replace(u,function(n){return i.startTag=i.startTag+n,""})),t&&(u=r.extendRegExp(t,"","$"),this.selection=this.selection.replace(u,function(n){return i.endTag=n+i.endTag,""}),u=r.extendRegExp(t,"^",""),this.after=this.after.replace(u,function(n){return i.endTag=n+i.endTag,""}))},n.Chunks.prototype.trimWhitespace=function(n){this.selection=this.selection.replace(/^(\s*)/,""),n||(this.before+=f.$1),this.selection=this.selection.replace(/(\s*)$/,""),n||(this.after=f.$1+this.after)},n.Chunks.prototype.addBlankLines=function(n,t,i){n===undefined&&(n=1),t===undefined&&(t=1),n++,t++;var r,u;if(this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+f.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+f.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+f.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+f.$1,this.before){for(r=u="";n--;)r+="\\n?",u+="\n";i&&(r="\\n*"),this.before=this.before.replace(new f(r+"$",""),u)}if(this.after){for(r=u="";t--;)r+="\\n?",u+="\n";i&&(r="\\n*"),this.after=this.after.replace(new f(r,""),u)}},t.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",t.unwrap=function(n){var i=new f("([^\\n])\\n(?!(\\n|"+t.prefixes+"))","g");n.selection=n.selection.replace(i,"$1 $2")},t.wrap=function(n,i){t.unwrap(n);var r=new f("(.{1,"+i+"})( +|$\\n?)","gm");n.selection=n.selection.replace(r,function(n,i){return new f("^"+t.prefixes,"").test(n)?n:i+"\n"}),n.selection=n.selection.replace(/\s+$/,"")},t.doBold=function(n){return t.doBorI(n,2,"strong text")},t.doItalic=function(n){return t.doBorI(n,1,"emphasized text")},t.doBorI=function(n,t,i){var o,r,u,s,e;n.trimWhitespace(),n.selection=n.selection.replace(/\n{2,}/g,"\n"),n.before.search(/(\**$)/),o=f.$1,n.after.search(/(^\**)/),r=f.$1,u=Math.min(o.length,r.length),u>=t&&(u!=2||t!=1)?(n.before=n.before.replace(f("[*]{"+t+"}$",""),""),n.after=n.after.replace(f("^[*]{"+t+"}",""),"")):!n.selection&&r?(n.after=n.after.replace(/^([*_]*)/,""),n.before=n.before.replace(/(\s?)$/,""),s=f.$1,n.before=n.before+r+s):(n.selection||r||(n.selection=i),e=t<=1?"*":"**",n.before=n.before+e,n.after=e+n.after);return},t.stripLinkDefs=function(n,t){return n.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(n,i,r,u,f){return(t[i]=n.replace(/\s*$/,""),u)?(t[i]=n.replace(/["(](.+?)[")]$/,""),u+f):""})},t.addLinkDef=function(n,i){var u=0,r={},h;n.before=t.stripLinkDefs(n.before,r),n.selection=t.stripLinkDefs(n.selection,r),n.after=t.stripLinkDefs(n.after,r);var o="",f=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,s=function(n){u++,n=n.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+u+"]:"),o+="\n"+n},e=function(n,t,i,f){return r[i]?(s(r[i]),t+u+f):n};return n.before=n.before.replace(f,e),i?s(i):n.selection=n.selection.replace(f,e),h=u,n.after=n.after.replace(f,e),n.after&&(n.after=n.after.replace(/\n*$/,"")),n.after||(n.selection=n.selection.replace(/\n*$/,"")),n.after+="\n\n"+o,h},t.doLinkOrImage=function(n,i,u){if(n.trimWhitespace(),n.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),n.endTag.length>1)n.startTag=n.startTag.replace(/!?\[/,""),n.endTag="",t.addLinkDef(n,null);else{if(/\n\n/.test(n.selection)){t.addLinkDef(n,null);return}var f=function(r){if(r!==null){n.startTag=n.endTag="";var f=" [999]: "+r,e=t.addLinkDef(n,f);n.startTag=u?"![":"[",n.endTag="]["+e+"]",n.selection||(n.selection=u?"alt text":"link text")}i()};return u?r.prompt(s,c,f):r.prompt(h,l,f),!0}},r.makeAPI=function(){n.wmd={},n.wmd.editor=n.editor,n.wmd.previewManager=n.previewManager},r.startEditor=function(){if(n.wmd_env.autostart===!1){r.makeAPI();return}var i,t,u=function(){n.panels=new n.PanelCollection,t=new n.previewManager;var r=t.refresh;i=new n.editor(r),t.refresh(!0)};r.addEvent(top,"load",u)},n.previewManager=function(){var d=this,t,o,f,s,h,a,y=3e3,c="delayed",g=function(t,i){r.addEvent(t,"input",i),t.onpaste=i,t.ondrop=i,r.addEvent(t,"keypress",i),r.addEvent(t,"keydown",i),o=new n.inputPoller(i,v)},p=function(){var n=0;return top.innerHeight?n=top.pageYOffset:i.documentElement&&i.documentElement.scrollTop?n=i.documentElement.scrollTop:i.body&&(n=i.body.scrollTop),n},l=function(){var i,r,u;(n.panels.preview||n.panels.output)&&((i=n.panels.input.value,i&&i==h)||(h=i,r=(new Date).getTime(),!t&&n.showdown&&(t=new n.showdown.converter),t&&(i=t.makeHtml(i)),u=(new Date).getTime(),s=u-r,tt(i),a=i))},w=function(){if(f&&(top.clearTimeout(f),f=undefined),c!=="manual"){var n=0;c==="delayed"&&(n=s),n>y&&(n=y),f=top.setTimeout(l,n)}},b=function(n){return n.scrollHeight<=n.clientHeight?1:n.scrollTop/(n.scrollHeight-n.clientHeight)},nt=function(){n.panels.preview&&(n.panels.preview.scrollTop=(n.panels.preview.scrollHeight-n.panels.preview.clientHeight)*b(n.panels.preview)),n.panels.output&&(n.panels.output.scrollTop=(n.panels.output.scrollHeight-n.panels.output.clientHeight)*b(n.panels.output))};this.refresh=function(n){n?(h="",l()):w()},this.processingTime=function(){return s},this.output=function(){return a},this.setUpdateMode=function(n){c=n,d.refresh()};var k=!0,tt=function(t){var f=e.getTop(n.panels.input)-p(),i,r;if(n.panels.output&&(n.panels.output.value!==undefined?(n.panels.output.value=t,n.panels.output.readOnly=!0):(i=t.replace(/&/g,"&amp;"),i=i.replace(/</g,"&lt;"),n.panels.output.innerHTML="<pre><code>"+i+"<\/code><\/pre>")),n.panels.preview&&(n.panels.preview.innerHTML=t),nt(),k){k=!1;return}r=e.getTop(n.panels.input)-p(),u.isIE?top.setTimeout(function(){top.scrollBy(0,r-f)},0):top.scrollBy(0,r-f)},it=function(){g(n.panels.input,w),l(),n.panels.preview&&(n.panels.preview.scrollTop=0),n.panels.output&&(n.panels.output.scrollTop=0)};this.destroy=function(){o&&o.destroy()},it()},t.doAutoindent=function(n,i,r){n.before=n.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),n.before=n.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),n.before=n.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),r=!1,/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(n.before)&&t.doList&&t.doList(n,i,!1,!0),/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(n.before)&&t.doList&&t.doList(n,i,!0,!0),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(n.before)&&t.doBlockquote&&t.doBlockquote(n,i,r),/(\n|^)(\t|[ ]{4,}).*\n$/.test(n.before)&&t.doCode&&t.doCode(n,i,r)},t.doBlockquote=function(i,r,u){var e,f;i.selection=i.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(n,t,r,u){return i.before+=t,i.after=u+i.after,r}),i.before=i.before.replace(/(>[ \t]*)$/,function(n,t){return i.selection=t+i.selection,""}),e=u?"Blockquote":"",i.selection=i.selection.replace(/^(\s|>)+$/,""),i.selection=i.selection||e,i.before&&(i.before=i.before.replace(/\n?$/,"\n")),i.after&&(i.after=i.after.replace(/^\n?/,"\n")),i.before=i.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,function(n){return i.startTag=n,""}),i.after=i.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(n){return i.endTag=n,""}),f=function(n){var t=n?"> ":"";i.startTag&&(i.startTag=i.startTag.replace(/\n((>|\s)*)\n$/,function(n,i){return"\n"+i.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)+"\n"})),i.endTag&&(i.endTag=i.endTag.replace(/^\n((>|\s)*)\n/,function(n,i){return"\n"+i.replace(/^[ ]{0,3}>?[ \t]*$/gm,t)+"\n"}))},/^(?![ ]{0,3}>)/m.test(i.selection)?(t.wrap(i,n.wmd_env.lineLength-2),i.selection=i.selection.replace(/^/gm,"> "),f(!0),i.addBlankLines()):(i.selection=i.selection.replace(/^[ ]{0,3}> ?/gm,""),t.unwrap(i),f(!1),!/^(\n|^)[ ]{0,3}>/.test(i.selection)&&i.startTag&&(i.startTag=i.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(i.selection)&&i.endTag&&(i.endTag=i.endTag.replace(/^\n{0,2}/,"\n\n"))),/\n/.test(i.selection)||(i.selection=i.selection.replace(/^(> *)/,function(n,t){return i.startTag+=t,""}))},t.doCode=function(n,t,i){var f=/\S[ ]*$/.test(n.before),e=/^[ ]*\S/.test(n.after),r,u;(e||f)&&!/\n/.test(n.selection)?(n.trimWhitespace(),n.findTags(/`/,/`/),n.startTag||n.endTag?n.endTag&&!n.startTag?(n.before+=n.endTag,n.endTag=""):n.startTag=n.endTag="":(n.startTag=n.endTag="`",n.selection||(n.selection=i?"enter code here":""))):(n.before=n.before.replace(/[ ]{4}$/,function(t){return n.selection=t+n.selection,""}),r=1,u=1,(/\n(\t|[ ]{4,}).*\n$/.test(n.before)||n.after==="")&&(r=0),/^\n(\t|[ ]{4,})/.test(n.after)&&(u=0),n.addBlankLines(r,u),n.selection?n.selection=/^[ ]{0,3}\S/m.test(n.selection)?n.selection.replace(/^/gm,"    "):n.selection.replace(/^[ ]{4}/gm,""):(n.startTag="    ",n.selection=i?"enter code here":""))},t.doList=function(i,r,u,e){var v=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,y="-",p=1,w=function(){var n;return u?(n=" "+p+". ",p++):n=" "+y+" ",n},o=function(n){return u===undefined&&(u=/^\s*\d/.test(n)),n.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return w()})},s,h,c,l,a;(i.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!i.before||/\n$/.test(i.before)||/^\n/.test(i.startTag)||(i.before+=i.startTag,i.startTag=""),i.startTag&&(s=/\d+[.]/.test(i.startTag),i.startTag="",i.selection=i.selection.replace(/\n[ ]{4}/g,"\n"),t.unwrap(i),i.addBlankLines(),s&&(i.after=i.after.replace(v,o)),u==s))||(h=1,i.before=i.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(n){return/^\s*([*+-])/.test(n)&&(y=f.$1),h=/[^\n]\n\n[^\n]/.test(n)?1:0,o(n)}),i.selection||(i.selection=e?"List item":" "),c=w(),l=1,i.after=i.after.replace(v,function(n){return l=/[^\n]\n\n[^\n]/.test(n)?1:0,o(n)}),i.trimWhitespace(!0),i.addBlankLines(h,l,!0),i.startTag=c,a=c.replace(/./g," "),t.wrap(i,n.wmd_env.lineLength-a.length),i.selection=i.selection.replace(/\n/g,"\n"+a))},t.doHeading=function(t){var i,u,e,r;if(t.selection=t.selection.replace(/\s+/g," "),t.selection=t.selection.replace(/(^\s+|\s+$)/g,""),!t.selection){t.startTag="## ",t.selection="Heading",t.endTag=" ##";return}if(i=0,t.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(t.startTag)&&(i=f.lastMatch.length),t.startTag=t.endTag="",t.findTags(null,/\s?(-+|=+)/),/=+/.test(t.endTag)&&(i=1),/-+/.test(t.endTag)&&(i=2),t.startTag=t.endTag="",t.addBlankLines(1,1),u=i==0?2:i-1,u>0)for(e=u>=2?"-":"=",r=t.selection.length,r>n.wmd_env.lineLength&&(r=n.wmd_env.lineLength),t.endTag="\n";r--;)t.endTag+=e},t.doHorizontalRule=function(n){n.startTag="----------\n",n.selection="",n.addBlankLines(2,1,!0)}},Attacklab.wmd_env={},Attacklab.account_options={},Attacklab.wmd_defaults={version:1,output:"HTML",lineLength:40,delayLoad:!1},Attacklab.wmd||(Attacklab.wmd=function(){Attacklab.loadEnv=function(){var n=function(n){if(n)for(var t in n)Attacklab.wmd_env[t]=n[t]},t;n(Attacklab.wmd_defaults),n(Attacklab.account_options),n(top.wmd_options),Attacklab.full=!0,t="bold italic link blockquote code image ol ul heading hr",Attacklab.wmd_env.buttons=Attacklab.wmd_env.buttons||t},Attacklab.loadEnv()},Attacklab.wmd(),Attacklab.wmdBase(),Attacklab.Util.startEditor());
//@ sourceMappingURL=wmd.min.js.map