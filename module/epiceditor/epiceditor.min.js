(function(n,t){function l(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}function f(n,t){for(var i in t)t.hasOwnProperty(i)&&(n.style[i]=t[i])}function r(t,i){var r=t,u=null;return n.getComputedStyle?u=document.defaultView.getComputedStyle(r,null).getPropertyValue(i):r.currentStyle&&(u=r.currentStyle[i]),u}function u(n,t,i){var e={},u;if(t==="save"){for(u in i)i.hasOwnProperty(u)&&(e[u]=r(n,u));f(n,i)}else t==="apply"&&f(n,i);return e}function a(n){var t=parseInt(r(n,"border-left-width"),10)+parseInt(r(n,"border-right-width"),10),i=parseInt(r(n,"padding-left"),10)+parseInt(r(n,"padding-right"),10),u=n.offsetWidth;return isNaN(t)&&(t=0),t+i+u}function v(n){var t=parseInt(r(n,"border-top-width"),10)+parseInt(r(n,"border-bottom-width"),10),i=parseInt(r(n,"padding-top"),10)+parseInt(r(n,"padding-bottom"),10),u=n.offsetHeight;return isNaN(t)&&(t=0),t+i+u}function e(n,t,i){i=i||"";var u=t.getElementsByTagName("head")[0],r=t.createElement("link");l(r,{type:"text/css",id:i,rel:"stylesheet",href:n,name:n,media:"screen"}),u.appendChild(r)}function h(n,t,i){n.className=n.className.replace(t,i)}function o(n){return n.contentDocument||n.contentWindow.document}function y(n){var t;return typeof document.body.innerText=="string"?t=n.innerText:(t=n.innerHTML.replace(/<br>/gi,"\n"),t=t.replace(/<(?:.|\n)*?>/gm,""),t=t.replace(/&lt;/gi,"<"),t=t.replace(/&gt;/gi,">")),t}function s(n,t){return typeof document.body.innerText=="string"?(t=t.replace(/ /g," "),n.innerText=t):(t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/\n/g,"<br>"),t=t.replace(/\s\s/g," &nbsp;"),n.innerHTML=t),!0}function p(){var n=-1,i=navigator.userAgent,t;return navigator.appName=="Microsoft Internet Explorer"&&(t=/MSIE ([0-9]{1,}[\.0-9]{0,})/,t.exec(i)!=null&&(n=parseFloat(RegExp.$1,10))),n}function w(){var t=n.navigator;return t.userAgent.indexOf("Safari")>-1&&t.userAgent.indexOf("Chrome")==-1}function b(n){return n&&{}.toString.call(n)==="[object Function]"}function c(){var n=arguments[0]||{},r=1,o=arguments.length,e=!1,f,u,s,i;for(typeof n=="boolean"&&(e=n,n=arguments[1]||{},r=2),typeof n=="object"||b(n)||(n={}),o===r&&(n=this,--r);r<o;r++)if((f=arguments[r])!=null)for(u in f)if(f.hasOwnProperty(u)){if(s=n[u],i=f[u],n===i)continue;e&&i&&typeof i=="object"&&!i.nodeType?n[u]=c(e,s||(i.length!=null?[]:{}),i):i!==t&&(n[u]=i)}return n}function i(n){var r=this,e=n||{},f,o={container:"epiceditor",basePath:"epiceditor",clientSideStorage:!0,localStorageName:"epiceditor",useNativeFullscreen:!0,file:{name:null,defaultContent:"",autoSave:100},theme:{base:"/themes/base/epiceditor.css",preview:"/themes/preview/github.css",editor:"/themes/editor/epic-dark.css"},focusOnLoad:!1,shortcut:{modifier:18,fullscreen:70,preview:80},parser:typeof marked=="function"?marked:null},u;return r.settings=c(!0,o,e),typeof r.settings.parser=="function"&&typeof r.settings.parser("TEST")=="string"||(r.settings.parser=function(n){return n}),typeof r.settings.container=="string"?r.element=document.getElementById(r.settings.container):typeof r.settings.container=="object"&&(r.element=r.settings.container),r.settings.file.name||(typeof r.settings.container=="string"?r.settings.file.name=r.settings.container:typeof r.settings.container=="object"&&(r.element.id?r.settings.file.name=r.element.id:(i._data.unnamedEditors||(i._data.unnamedEditors=[]),i._data.unnamedEditors.push(r),r.settings.file.name="__epiceditor-untitled-"+i._data.unnamedEditors.length))),r._instanceId="epiceditor-"+Math.round(Math.random()*1e5),r._storage={},r._canSave=!0,r._defaultFileSchema=function(){return{content:r.settings.file.defaultContent,created:new Date,modified:new Date}},localStorage&&r.settings.clientSideStorage&&(this._storage=localStorage,this._storage[r.settings.localStorageName]&&r.getFiles(r.settings.file.name)===t&&(f=r.getFiles(r.settings.file.name),f=r._defaultFileSchema(),f.content=r.settings.file.defaultContent)),this._storage[r.settings.localStorageName]||(u={},u[r.settings.file.name]=r._defaultFileSchema(),u=JSON.stringify(u),this._storage[r.settings.localStorageName]=u),r._eeState={fullscreen:!1,preview:!1,edit:!1,loaded:!1,unloaded:!1},r.events||(r.events={}),this}i.prototype.load=function(t){function ft(t){(Math.abs(rt.y-t.pageY)>=5||Math.abs(rt.x-t.pageX)>=5)&&(y.style.display="block",b&&clearTimeout(b),b=n.setTimeout(function(){y.style.display="none"},1e3)),rt={y:t.pageY,x:t.pageX}}function et(n){n.keyCode==i.settings.shortcut.modifier&&(a=!0),n.keyCode==17&&(d=!0),a!==!0||n.keyCode!=i.settings.shortcut.preview||i.is("fullscreen")||(n.preventDefault(),i.is("edit")?i.preview():i.edit()),a===!0&&n.keyCode==i.settings.shortcut.fullscreen&&(n.preventDefault(),i._goFullscreen(l)),a===!0&&n.keyCode!==i.settings.shortcut.modifier&&(a=!1),n.keyCode==27&&i.is("fullscreen")&&i._exitFullscreen(l),d===!0&&n.keyCode==83&&(i.save(),n.preventDefault(),d=!1),n.metaKey&&n.keyCode==83&&(i.save(),n.preventDefault())}function ot(n){n.keyCode==i.settings.shortcut.modifier&&(a=!1),n.keyCode==17&&(d=!1)}if(this.is("loaded"))return this;var i=this,g,nt,tt,k,y,b,it,rt={y:-1,x:-1},s,ut,c=!1,l,a=!1,d=!1,v,h;for(i.settings.useNativeFullscreen&&(c=document.body.webkitRequestFullScreen?!0:!1),w()&&(c=!1),i.is("edit")||i.is("preview")||(i._eeState.edit=!0),t=t||function(){},g={chrome:'<div id="epiceditor-wrapper" class="epiceditor-edit-mode"><iframe frameborder="0" id="epiceditor-editor-frame"><\/iframe><iframe frameborder="0" id="epiceditor-previewer-frame"><\/iframe><div id="epiceditor-utilbar"><img width="30" src="'+this.settings.basePath+'/images/preview.png" title="Toggle Preview Mode" class="epiceditor-toggle-btn epiceditor-toggle-preview-btn"> <img width="30" src="'+this.settings.basePath+'/images/edit.png" title="Toggle Edit Mode" class="epiceditor-toggle-btn epiceditor-toggle-edit-btn"> <img width="30" src="'+this.settings.basePath+'/images/fullscreen.png" title="Enter Fullscreen" class="epiceditor-fullscreen-btn"><\/div><\/div>',previewer:'<div id="epiceditor-preview"><\/div>'},i.element.innerHTML='<iframe scrolling="no" frameborder="0" id= "'+i._instanceId+'"><\/iframe>',i.element.style.height=i.element.offsetHeight+"px",nt=document.getElementById(i._instanceId),i.iframeElement=nt,i.iframe=o(nt),i.iframe.open(),i.iframe.write(g.chrome),i.editorIframe=i.iframe.getElementById("epiceditor-editor-frame"),i.previewerIframe=i.iframe.getElementById("epiceditor-previewer-frame"),i.editorIframeDocument=o(i.editorIframe),i.editorIframeDocument.open(),i.editorIframeDocument.write(""),i.editorIframeDocument.close(),i.previewerIframeDocument=o(i.previewerIframe),i.previewerIframeDocument.open(),i.previewerIframeDocument.write(g.previewer),tt=i.previewerIframeDocument.createElement("base"),tt.target="_blank",i.previewerIframeDocument.getElementsByTagName("head")[0].appendChild(tt),i.previewerIframeDocument.close(),i.reflow(),e(i.settings.basePath+i.settings.theme.base,i.iframe,"theme"),e(i.settings.basePath+i.settings.theme.editor,i.editorIframeDocument,"theme"),e(i.settings.basePath+i.settings.theme.preview,i.previewerIframeDocument,"theme"),i.iframe.getElementById("epiceditor-wrapper").style.position="relative",i.editor=i.editorIframeDocument.body,i.previewer=i.previewerIframeDocument.getElementById("epiceditor-preview"),i.editor.contentEditable=!0,i.iframe.body.style.height=this.element.offsetHeight+"px",this.previewerIframe.style.display="none",p()>-1&&(this.previewer.style.height=parseInt(r(this.previewer,"height"),10)+2),this.open(i.settings.file.name),i.settings.focusOnLoad&&i.iframe.addEventListener("readystatechange",function(){i.iframe.readyState=="complete"&&i.editorIframeDocument.body.focus()}),k=i.iframe.getElementById("epiceditor-utilbar"),s={},i._goFullscreen=function(t){if(i.is("fullscreen")){i._exitFullscreen(t);return}c&&t.webkitRequestFullScreen(),ut=i.is("edit"),i._eeState.fullscreen=!0,i._eeState.edit=!0,i._eeState.preview=!0;var h=n.innerWidth,o=n.innerHeight,f=n.outerWidth,e=n.outerHeight;c||(e=n.innerHeight),s.editorIframe=u(i.editorIframe,"save",{width:f/2+"px",height:e+"px",float:"left",cssFloat:"left",styleFloat:"left",display:"block"}),s.previewerIframe=u(i.previewerIframe,"save",{width:f/2+"px",height:e+"px",float:"right",cssFloat:"right",styleFloat:"right",display:"block"}),s.element=u(i.element,"save",{position:"fixed",top:"0",left:"0",width:"100%","z-index":"9999",zIndex:"9999",border:"none",margin:"0",background:r(i.editor,"background-color"),height:o+"px"}),s.iframeElement=u(i.iframeElement,"save",{width:f+"px",height:o+"px"}),k.style.visibility="hidden",c||(document.body.style.overflow="hidden"),i.preview(),i.editorIframeDocument.body.focus(),i.emit("fullscreenenter")},i._exitFullscreen=function(){u(i.element,"apply",s.element),u(i.iframeElement,"apply",s.iframeElement),u(i.editorIframe,"apply",s.editorIframe),u(i.previewerIframe,"apply",s.previewerIframe),i.element.style.width=i._eeState.reflowWidth?i._eeState.reflowWidth:"",i.element.style.height=i._eeState.reflowHeight?i._eeState.reflowHeight:"",k.style.visibility="visible",c?document.webkitCancelFullScreen():document.body.style.overflow="auto",i._eeState.fullscreen=!1,ut?i.edit():i.preview(),i.reflow(),i.emit("fullscreenexit")},i.editor.addEventListener("keyup",function(){it&&n.clearTimeout(it),it=n.setTimeout(function(){i.is("fullscreen")&&i.preview()},250)}),l=i.iframeElement,k.addEventListener("click",function(n){var t=n.target.className;t.indexOf("epiceditor-toggle-preview-btn")>-1?i.preview():t.indexOf("epiceditor-toggle-edit-btn")>-1?i.edit():t.indexOf("epiceditor-fullscreen-btn")>-1&&i._goFullscreen(l)}),document.body.webkitRequestFullScreen&&l.addEventListener("webkitfullscreenchange",function(){document.webkitIsFullScreen||i._exitFullscreen(l)},!1),y=i.iframe.getElementById("epiceditor-utilbar"),y.style.display="none",y.addEventListener("mouseover",function(){b&&clearTimeout(b)}),v=[i.previewerIframeDocument,i.editorIframeDocument],h=0;h<v.length;h++)v[h].addEventListener("mousemove",function(n){ft(n)}),v[h].addEventListener("scroll",function(n){ft(n)}),v[h].addEventListener("keyup",function(n){ot(n)}),v[h].addEventListener("keydown",function(n){et(n)});return i.settings.file.autoSave&&(i.saveInterval=n.setInterval(function(){i._canSave&&i.save()},i.settings.file.autoSave)),n.addEventListener("resize",function(){!i.iframe.webkitRequestFullScreen&&i.is("fullscreen")?(f(i.iframeElement,{width:n.outerWidth+"px",height:n.innerHeight+"px"}),f(i.element,{height:n.innerHeight+"px"}),f(i.previewerIframe,{width:n.outerWidth/2+"px",height:n.innerHeight+"px"}),f(i.editorIframe,{width:n.outerWidth/2+"px",height:n.innerHeight+"px"})):i.is("fullscreen")||i.reflow()}),i._eeState.loaded=!0,i._eeState.unloaded=!1,i.is("preview")?i.preview():i.edit(),i.iframe.close(),t.call(this),this.emit("load"),this},i.prototype.unload=function(t){if(this.is("unloaded"))throw new Error("Editor isn't loaded");var i=this,r=n.parent.document.getElementById(i._instanceId);return r.parentNode.removeChild(r),i._eeState.loaded=!1,i._eeState.unloaded=!0,t=t||function(){},i.saveInterval&&n.clearInterval(i.saveInterval),t.call(this),i.emit("unload"),i},i.prototype.reflow=function(n){for(var t=this,e=a(t.element)-t.element.offsetWidth,o=v(t.element)-t.element.offsetHeight,r=[t.iframeElement,t.editorIframe,t.previewerIframe],u,f,i=0;i<r.length;i++)n&&n!="width"||(u=t.element.offsetWidth-e+"px",r[i].style.width=u,t._eeState.reflowWidth=u),n&&n!="height"||(f=t.element.offsetHeight-o+"px",r[i].style.height=f,t._eeState.reflowHeight=f);return t},i.prototype.preview=function(t){var i=this,u,r;t=t||i.settings.basePath+i.settings.theme.preview,h(i.getElement("wrapper"),"epiceditor-edit-mode","epiceditor-preview-mode"),i.previewerIframeDocument.getElementById("theme")?i.previewerIframeDocument.getElementById("theme").name!==t&&(i.previewerIframeDocument.getElementById("theme").href=t):e(t,i.previewerIframeDocument,"theme"),i.previewer.innerHTML=i.exportFile(null,"html"),r=i.previewer.getElementsByTagName("a");for(u in r)r[u].hash&&r[u].hostname==n.location.hostname&&(r[u].target="_self");return i.is("fullscreen")||(i.editorIframe.style.display="none",i.previewerIframe.style.display="block",i._eeState.preview=!0,i._eeState.edit=!1,i.previewerIframe.focus()),i.emit("preview"),i},i.prototype.enterFullscreen=function(){return this.is("fullscreen")?this:(this._goFullscreen(this.iframeElement),this)},i.prototype.exitFullscreen=function(){return this.is("fullscreen")?(this._exitFullscreen(this.iframeElement),this):this},i.prototype.edit=function(){var n=this;return h(n.getElement("wrapper"),"epiceditor-preview-mode","epiceditor-edit-mode"),n._eeState.preview=!1,n._eeState.edit=!0,n.editorIframe.style.display="block",n.previewerIframe.style.display="none",n.editorIframe.focus(),n.emit("edit"),this},i.prototype.getElement=function(n){var t={container:this.element,wrapper:this.iframe.getElementById("epiceditor-wrapper"),wrapperIframe:this.iframeElement,editor:this.editorIframeDocument,editorIframe:this.editorIframe,previewer:this.previewerIframeDocument,previewerIframe:this.previewerIframe};return!t[n]||this.is("unloaded")?null:t[n]},i.prototype.is=function(n){var t=this;switch(n){case"loaded":return t._eeState.loaded;case"unloaded":return t._eeState.unloaded;case"preview":return t._eeState.preview;case"edit":return t._eeState.edit;case"fullscreen":return t._eeState.fullscreen;default:return!1}},i.prototype.open=function(n){var i=this,u=i.settings.file.defaultContent,r;return n=n||i.settings.file.name,i.settings.file.name=n,this._storage[i.settings.localStorageName]&&(r=i.getFiles(),r[n]!==t?(s(i.editor,r[n].content),i.emit("read")):(s(i.editor,u),i.save(),i.emit("create")),i.previewer.innerHTML=i.exportFile(null,"html"),i.emit("open")),this},i.prototype.save=function(){var i=this,n,u=!1,r=i.settings.file.name,f=y(this.editor);return this._canSave=!0,n=JSON.parse(this._storage[i.settings.localStorageName]),n[r]===t?n[r]=i._defaultFileSchema():f!==n[r].content&&(n[r].modified=new Date,u=!0),n[r].content=f,this._storage[i.settings.localStorageName]=JSON.stringify(n),u&&i.emit("update"),this.emit("save"),this},i.prototype.remove=function(n){var t=this,i;return n=n||t.settings.file.name,n==t.settings.file.name&&(t._canSave=!1),i=JSON.parse(this._storage[t.settings.localStorageName]),delete i[n],this._storage[t.settings.localStorageName]=JSON.stringify(i),this.emit("remove"),this},i.prototype.rename=function(n,t){var r=this,i=JSON.parse(this._storage[r.settings.localStorageName]);return i[t]=i[n],delete i[n],this._storage[r.settings.localStorageName]=JSON.stringify(i),r.open(t),this},i.prototype.importFile=function(n,i,r,u){var f=this,e=!1;return n=n||f.settings.file.name,i=i||"",r=r||"md",u=u||{},JSON.parse(this._storage[f.settings.localStorageName])[n]===t&&(e=!0),f.settings.file.name=n,s(f.editor,i),e&&f.emit("create"),f.save(),f.is("fullscreen")&&f.preview(),this},i.prototype.exportFile=function(n,i){var u=this,f,r;if(n=n||u.settings.file.name,i=i||"text",f=u.getFiles(n),f!==t){r=f.content;switch(i){case"html":return r=r.replace(/\u00a0/g," ").replace(/&nbsp;/g," "),u.settings.parser(r);case"text":return r.replace(/\u00a0/g," ").replace(/&nbsp;/g," ");default:return r}}},i.prototype.getFiles=function(n){var t=JSON.parse(this._storage[this.settings.localStorageName]);return n?t[n]:t},i.prototype.on=function(n,t){var i=this;return this.events[n]||(this.events[n]=[]),this.events[n].push(t),i},i.prototype.emit=function(n,t){function u(n){n.call(i,t)}var i=this,r;if(t=t||i.getFiles(i.settings.file.name),this.events[n]){for(r=0;r<i.events[n].length;r++)u(i.events[n][r]);return i}},i.prototype.removeListener=function(n,t){var i=this;return t?this.events[n]?(this.events[n].splice(this.events[n].indexOf(t),1),i):i:(this.events[n]=[],i)},i.version="0.2.0",i._data={},n.EpicEditor=i})(window),function(){function v(t,i){return t[0][0]!=="!"?'<a href="'+r(i.href)+'"'+(i.title?' title="'+r(i.title)+'"':"")+">"+n.lexer(t[1])+"<\/a>":'<img src="'+r(i.href)+'" alt="'+r(t[1])+'"'+(i.title?' title="'+r(i.title)+'"':"")+">"}function o(){return i=e.pop()}function h(){var f,t;switch(i.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+i.depth+">"+n.lexer(i.text)+"<\/h"+i.depth+">\n";case"code":return u.highlight&&(i.code=u.highlight(i.text,i.lang),i.code!=null&&i.code!==i.text&&(i.escaped=!0,i.text=i.code)),i.escaped||(i.text=r(i.text,!0)),"<pre><code"+(i.lang?' class="lang-'+i.lang+'"':"")+">"+i.text+"<\/code><\/pre>\n";case"blockquote_start":for(t="";o().type!=="blockquote_end";)t+=h();return"<blockquote>\n"+t+"<\/blockquote>\n";case"list_start":for(f=i.ordered?"ol":"ul",t="";o().type!=="list_end";)t+=h();return"<"+f+">\n"+t+"<\/"+f+">\n";case"list_item_start":for(t="";o().type!=="list_item_end";)t+=i.type==="text"?y():h();return"<li>"+t+"<\/li>\n";case"loose_item_start":for(t="";o().type!=="list_item_end";)t+=h();return"<li>"+t+"<\/li>\n";case"html":return u.sanitize?n.lexer(i.text):!i.pre&&!u.pedantic?n.lexer(i.text):i.text;case"paragraph":return"<p>"+n.lexer(i.text)+"<\/p>\n";case"text":return"<p>"+y()+"<\/p>\n"}}function y(){for(var t=i.text,r;(r=e[e.length-1])&&r.type==="text";)t+="\n"+o().text;return n.lexer(t)}function p(n){e=n.reverse();for(var t="";o();)t+=h();return e=null,i=null,t}function r(n,t){return n.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(n){for(var r="",u=n.length,i=0,t;i<u;i++)t=n.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r}function w(){return"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+"}function s(n,t){return n=n.source,t=t||"",function i(r,u){return r?(n=n.replace(r,u.source||u),i):new RegExp(n,t)}}function c(){}function f(n,i){return l(i),p(t.lexer(n))}function l(i){(i||(i=b),u!==i)&&(u=i,u.gfm?(t.fences=t.gfm.fences,t.paragraph=t.gfm.paragraph,n.text=n.gfm.text,n.url=n.gfm.url):(t.fences=t.normal.fences,t.paragraph=t.normal.paragraph,n.text=n.normal.text,n.url=n.normal.url),u.pedantic?(n.em=n.pedantic.em,n.strong=n.pedantic.strong):(n.em=n.normal.em,n.strong=n.normal.strong))}var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:c,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [^\0]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/},n,e,i,u,b;t.bullet=/(?:[*+-]|\d+\.)/,t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,t.item=s(t.item,"gm")(/bull/g,t.bullet)(),t.list=s(t.list)(/bull/g,t.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),t.html=s(t.html)("comment",/<!--[^\0]*?-->/)("closed",/<(tag)[^\0]+?<\/\1>/)("closing",/<tag(?!:\/|@)\b(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,w())(),t.paragraph=function(){var i=t.paragraph.source,n=[];return function r(i){return i=t[i]?t[i].source:i,n.push(i.replace(/(^|[^\[])\^/g,"$1")),r}("hr")("heading")("lheading")("blockquote")("<"+w())("def"),new RegExp(i.replace("body",n.join("|")))}(),t.normal={fences:t.fences,paragraph:t.paragraph},t.gfm={fences:/^ *``` *(\w+)? *\n([^\0]+?)\s*``` *(?:\n+|$)/,paragraph:/^/},t.gfm.paragraph=s(t.paragraph)("(?!","(?!"+t.gfm.fences.source.replace(/(^|[^\[])\^/g,"$1")+"|")(),t.lexer=function(n){var i=[];return i.links={},n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),t.token(n,i,!0)},t.token=function(n,i,r){for(var n=n.replace(/^ +$/gm,""),s,h,f,e,c,o,l;n;){if((f=t.newline.exec(n))&&(n=n.substring(f[0].length),f[0].length>1&&i.push({type:"space"})),f=t.code.exec(n)){n=n.substring(f[0].length),f=f[0].replace(/^ {4}/gm,""),i.push({type:"code",text:u.pedantic?f:f.replace(/\n+$/,"")});continue}if(f=t.fences.exec(n)){n=n.substring(f[0].length),i.push({type:"code",lang:f[1],text:f[2]});continue}if(f=t.heading.exec(n)){n=n.substring(f[0].length),i.push({type:"heading",depth:f[1].length,text:f[2]});continue}if(f=t.lheading.exec(n)){n=n.substring(f[0].length),i.push({type:"heading",depth:f[2]==="="?1:2,text:f[1]});continue}if(f=t.hr.exec(n)){n=n.substring(f[0].length),i.push({type:"hr"});continue}if(f=t.blockquote.exec(n)){n=n.substring(f[0].length),i.push({type:"blockquote_start"}),f=f[0].replace(/^ *> ?/gm,""),t.token(f,i,r),i.push({type:"blockquote_end"});continue}if(f=t.list.exec(n)){for(n=n.substring(f[0].length),i.push({type:"list_start",ordered:isFinite(f[2])}),f=f[0].match(t.item),s=!1,l=f.length,o=0;o<l;o++)e=f[o],c=e.length,e=e.replace(/^ *([*+-]|\d+\.) +/,""),~e.indexOf("\n ")&&(c-=e.length,e=u.pedantic?e.replace(/^ {1,4}/gm,""):e.replace(new RegExp("^ {1,"+c+"}","gm"),"")),h=s||/\n\n(?!\s*$)/.test(e),o!==l-1&&(s=e[e.length-1]==="\n",h||(h=s)),i.push({type:h?"loose_item_start":"list_item_start"}),t.token(e,i),i.push({type:"list_item_end"});i.push({type:"list_end"});continue}if(f=t.html.exec(n)){n=n.substring(f[0].length),i.push({type:"html",pre:f[1]==="pre",text:f[0]});continue}if(r&&(f=t.def.exec(n))){n=n.substring(f[0].length),i.links[f[1].toLowerCase()]={href:f[2],title:f[3]};continue}if(r&&(f=t.paragraph.exec(n))){n=n.substring(f[0].length),i.push({type:"paragraph",text:f[0]});continue}if(f=t.text.exec(n)){n=n.substring(f[0].length),i.push({type:"text",text:f[0]});continue}}return i},n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:c,tag:/^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/},n._linkInside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,n._linkHref=/\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/,n.link=s(n.link)("inside",n._linkInside)("href",n._linkHref)(),n.reflink=s(n.reflink)("inside",n._linkInside)(),n.normal={url:n.url,strong:n.strong,em:n.em,text:n.text},n.pedantic={strong:/^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/},n.gfm={url:/^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,text:/^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/},n.lexer=function(t){for(var f="",c=e.links,s,o,h,i;t;){if(i=n.escape.exec(t)){t=t.substring(i[0].length),f+=i[1];continue}if(i=n.autolink.exec(t)){t=t.substring(i[0].length),i[2]==="@"?(o=i[1][6]===":"?a(i[1].substring(7)):a(i[1]),h=a("mailto:")+o):(o=r(i[1]),h=o),f+='<a href="'+h+'">'+o+"<\/a>";continue}if(i=n.url.exec(t)){t=t.substring(i[0].length),o=r(i[1]),h=o,f+='<a href="'+h+'">'+o+"<\/a>";continue}if(i=n.tag.exec(t)){t=t.substring(i[0].length),f+=u.sanitize?r(i[0]):i[0];continue}if(i=n.link.exec(t)){t=t.substring(i[0].length),f+=v(i,{href:i[2],title:i[3]});continue}if((i=n.reflink.exec(t))||(i=n.nolink.exec(t))){if(t=t.substring(i[0].length),s=(i[2]||i[1]).replace(/\s+/g," "),s=c[s.toLowerCase()],!s||!s.href){f+=i[0][0],t=i[0].substring(1)+t;continue}f+=v(i,s);continue}if(i=n.strong.exec(t)){t=t.substring(i[0].length),f+="<strong>"+n.lexer(i[2]||i[1])+"<\/strong>";continue}if(i=n.em.exec(t)){t=t.substring(i[0].length),f+="<em>"+n.lexer(i[2]||i[1])+"<\/em>";continue}if(i=n.code.exec(t)){t=t.substring(i[0].length),f+="<code>"+r(i[2],!0)+"<\/code>";continue}if(i=n.br.exec(t)){t=t.substring(i[0].length),f+="<br>";continue}if(i=n.text.exec(t)){t=t.substring(i[0].length),f+=r(i[0]);continue}}return f},c.exec=c,f.options=f.setOptions=function(n){return b=n,l(n),f},f.setOptions({gfm:!0,pedantic:!1,sanitize:!1,highlight:null}),f.parser=function(n,t){return l(t),p(n)},f.lexer=function(n,i){return l(i),t.lexer(n)},f.parse=f,typeof module!="undefined"?module.exports=f:this.marked=f}.call(function(){return this||(typeof window!="undefined"?window:global)}());
//@ sourceMappingURL=epiceditor.min.js.map