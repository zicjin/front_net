define("arale/dialog/0.9.3/base-dialog",["$","arale/overlay/0.9.13/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.0/iframe-shim","arale/widget/1.0.2/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/overlay/0.9.13/mask"],function(a,b,c){function d(a){null==a.attr("tabindex")&&a.attr("tabindex","-1")}var e=a("$"),f=a("arale/overlay/0.9.13/overlay"),g=a("arale/overlay/0.9.13/mask"),h=(a("arale/events/1.0.0/events"),".trigger-events-"),i=f.extend({attrs:{trigger:null,triggerType:"click",zIndex:999,title:"",content:"",hasMask:!1,onConfirm:function(){},onClose:function(){}},parseElement:function(){i.superclass.parseElement.call(this),this.set("trigger",e(this.get("trigger"))),this.set("titleElement",this.$("[data-role=title]")),this.set("contentElement",this.$("[data-role=content]"))},events:{"click [data-role=confirm]":"confirm","click [data-role=cancel]":"close","click [data-role=close]":"close"},confirm:function(a){a&&a.preventDefault(),this.trigger("confirm")},close:function(a){a&&a.preventDefault(),this.trigger("close"),this.hide(),this.activeTrigger&&this.activeTrigger.focus()},show:function(){return i.superclass.show.call(this),this._contentFunction&&this.get("contentElement").html(this._contentFunction.call(this)),this._titleFunction&&this.get("titleElement").html(this._titleFunction.call(this)),this.element.focus(),this},destroy:function(){return this.get("trigger").off(this.get("triggerType")+h+this.cid),this.element.remove(),i.superclass.destroy.call(this)},setup:function(){i.superclass.setup.call(this),this._setupTrigger(),this._setupMask(),this._setupKeyEvents(),d(this.element),d(this.get("trigger"))},_setupTrigger:function(){var a=this;this.get("trigger").on(this.get("triggerType")+h+this.cid,function(b){b.preventDefault(),a.activeTrigger=e(this),a.show()})},_setupMask:function(){this.before("show",function(){this.get("hasMask")&&g.show()}),this.before("hide",function(){this.get("hasMask")&&g.hide()})},_setupKeyEvents:function(){this.delegateEvents("keyup",function(a){27===a.keyCode&&this.close()})},_onRenderTitle:function(a){e.isFunction(a)?this._titleFunction=a:(this._titleFunction=null,this.get("titleElement").html(a))},_onRenderContent:function(a){e.isFunction(a)?this._contentFunction=a:(this._contentFunction=null,this.get("contentElement").html(a))}});c.exports=i});